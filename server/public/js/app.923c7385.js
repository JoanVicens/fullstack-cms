(function(t){function a(a){for(var e,o,n=a[0],c=a[1],l=a[2],m=0,d=[];m<n.length;m++)o=n[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(t[e]=c[e]);u&&u(a);while(d.length)d.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,a=0;a<r.length;a++){for(var s=r[a],e=!0,n=1;n<s.length;n++){var c=s[n];0!==i[c]&&(e=!1)}e&&(r.splice(a--,1),t=o(o.s=s[0]))}return t}var e={},i={app:0},r=[];function o(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=e,o.d=function(t,a,s){o.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,a){if(1&a&&(t=o(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var e in t)o.d(s,e,function(a){return t[a]}.bind(null,e));return s},o.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(a,"a",a),a},o.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=a,n=n.slice();for(var l=0;l<n.length;l++)a(n[l]);var u=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,a,s){t.exports=s("56d7")},"02cf":function(t,a,s){"use strict";var e=s("e537"),i=s.n(e);i.a},"0630":function(t,a,s){},"0823":function(t,a,s){},"0842":function(t,a,s){},"0a35e":function(t,a,s){"use strict";var e=s("d12b"),i=s.n(e);i.a},1:function(t,a){},1228:function(t,a,s){},1390:function(t,a,s){},"162b":function(t,a,s){},1637:function(t,a,s){},"212e":function(t,a,s){"use strict";var e=s("5c61"),i=s.n(e);i.a},"23a1":function(t,a,s){"use strict";var e=s("1637"),i=s.n(e);i.a},"28fb":function(t,a,s){"use strict";var e=s("4f5a"),i=s.n(e);i.a},"3a9b":function(t,a,s){},"3b43":function(t,a,s){"use strict";var e=s("7e71"),i=s.n(e);i.a},"409a":function(t,a,s){"use strict";var e=s("9ec5"),i=s.n(e);i.a},"433e":function(t,a,s){},"45d5":function(t,a,s){t.exports=s.p+"img/banda.9101dfcf.jpg"},4678:function(t,a,s){var e={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var a=r(t);return s(a)}function r(t){if(!s.o(e,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e[t]}i.keys=function(){return Object.keys(e)},i.resolve=r,t.exports=i,i.id="4678"},"4ea4":function(t,a,s){},"4f5a":function(t,a,s){},"51d8":function(t,a,s){"use strict";var e=s("0823"),i=s.n(e);i.a},"53fe":function(t,a,s){},"56d7":function(t,a,s){"use strict";s.r(a);var e=s("2b0e"),i=s("2f62"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("header",{staticClass:"navegacio"},[e("div",{staticClass:"navbar navbar-dark bg-transparent",attrs:{id:"header"}},[e("div",{staticClass:"container"},[e("div",{},[e("router-link",{attrs:{to:{path:"/",params:{}}}},[e("img",{attrs:{src:s("cf05"),id:"logo",alt:"logo banda uji"}})]),e("div",{staticClass:"titols"},[e("h2",[t._v("Associació Cultural Banda UJI")]),e("h5",[t._v(t._s(t.$route.name))])])],1),e("MenuIcon",{staticClass:"float-right",attrs:{size:"2x",id:"menuIcon"},on:{click:t.obrirMenu}}),e("div",{attrs:{id:"usuari-header"}}),""===t.$route.name||"/recuperacio"===t.$route.path?e("div",{staticStyle:{"margin-left":"auto"},attrs:{id:"botonsCompte"}},[e("router-link",{staticClass:"btn btn-outline-light float-right mr-3",attrs:{to:{path:"/comptes/entrar",name:"login",params:{}}}},[t._v("Entrar")]),e("router-link",{staticClass:"btn btn-outline-light float-right",attrs:{to:{path:"/comptes/crear",name:"crearCompte",params:{}}}},[t._v("Crear comopte")])],1):t._e()],1)])]),e("Navbar"),e("div",{attrs:{id:"content"}},[e("router-view")],1),e("div",{staticClass:"overlay",on:{click:t.tancarMenu}})],1)},o=[],n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{attrs:{id:"sidebar"}},[s("div",{staticClass:"sidebar-header",on:{click:t.tancarMenu}},[t._v(" TANCAR ")]),s("section",{staticClass:"sidebar-content"},[s("ul",{staticClass:"components"},[t.store.getters.isLogged?s("div",[t.store.getters.esJunta||t.store.getters.esAdmin?s("div",{staticClass:"bg-blue"},[s("li",{staticClass:"gestio"},[s("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.llistaGestio",modifiers:{llistaGestio:!0}}],staticClass:"menuDesplegable"},[s("span",[t._v("Gestió")]),s("triangle-icon",{class:t.g_visible?"girar":"",attrs:{size:"1x"}})],1),s("b-collapse",{attrs:{id:"llistaGestio"},model:{value:t.g_visible,callback:function(a){t.g_visible=a},expression:"g_visible"}},[s("ul",{on:{click:t.tancarMenu}},[s("li",[s("router-link",{attrs:{to:{path:"/gestio/assitencia",params:{}}}},[t._v("Assitència")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/assajos",params:{}}}},[t._v("Assajos")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/cursos",params:{}}}},[t._v("Cursos")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/actuacions",params:{}}}},[t._v("Actuacions")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/credits",params:{}}}},[t._v("Crèdits")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/newsletter",params:{}}}},[t._v("Newsletter")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/musics",params:{}}}},[t._v("Músics")])],1)])])],1)]):t._e(),s("div",{on:{click:t.tancarMenu}},[s("li",[s("router-link",{attrs:{to:{path:"/compte/principal",params:{}}}},[t._v("Principal")])],1),s("li",[s("router-link",{attrs:{to:{path:"/compte/assistencia",name:"assistencia",params:{}}}},[t._v("Assistència")])],1),s("li",[s("router-link",{attrs:{to:{path:"/compte/actuacions",name:"Actuacions",params:{}}}},[t._v("Actuacions")])],1),s("li",[s("router-link",{attrs:{to:""}},[t._v("Enquestes")])],1),s("li",[s("router-link",{attrs:{to:{path:"/compte/preferencies",name:"Preferències",params:{}}}},[t._v("Preferències")])],1),s("li",[s("router-link",{attrs:{to:""}},[t._v("Notificacions")])],1),s("li",[s("router-link",{attrs:{to:{path:"/compte/logout",name:"logout",params:{}}}},[t._v("Tancar sessió")])],1)])]):s("div",[s("li",{on:{click:t.tancarMenu}},[s("router-link",{attrs:{to:{path:"/comptes/entrar",name:"login",params:{}}}},[t._v("Entrar")])],1),s("li",{on:{click:t.tancarMenu}},[s("router-link",{attrs:{to:{path:"/comptes/crear",name:"crearCompte",params:{}}}},[t._v("Crear compte")])],1)])]),s("ul",{staticClass:"social"},[s("li",[s("a",{staticClass:"facebook",attrs:{href:"https://www.facebook.com/AssociacioCulturalBandaUJI/",target:"_blank"}},[s("FacebookIcon",{attrs:{size:"1.5x"}})],1)]),s("li",[s("a",{staticClass:"instagram",attrs:{href:"https://www.instagram.com/bandauji/",target:"_blank"}},[s("InstagramIcon",{attrs:{size:"1.5x"}})],1)])])])])},c=[],l=s("1157"),u=s.n(l);const m={methods:{tancarMenu(){u()("#sidebar").removeClass("active"),u()(".overlay").removeClass("active"),u()("#content").removeClass("locked")},obrirMenu(){u()("#sidebar").addClass("active"),u()(".overlay").addClass("active"),u()(".collapse.in").toggleClass("in"),u()("a[aria-expanded=true]").attr("aria-expanded","false"),u()("#content").addClass("locked")}}};e["default"].use(i["a"]);const d=new i["a"].Store({state:{music:null,logged:!1,admin:!1,junta:!1},mutations:{loggedMusic(t){t.logged=!0},logoutMusic(t){t.logged=!1},esJunta(t){t.junta=!0},esAdmin(t){t.admin=!0}},getters:{isLogged:t=>t.logged,esJunta:t=>t.junta,esAdmin:t=>t.admin}});var f=d,p=s("0a35"),v={name:"Navbar",components:{TriangleIcon:p["o"],FacebookIcon:p["g"],InstagramIcon:p["i"]},mixins:[m],data(){return{store:f,g_visible:!1}}},h=v,b=(s("982a"),s("2877")),g=Object(b["a"])(h,n,c,!1,null,"7b53d81c",null),_=g.exports,C={name:"App",components:{Navbar:_,MenuIcon:p["l"]},mixins:[m],mounted(){if(this.$session.exists("token")){const t=this.$session.get("token");this.$session.set("token",t),e["default"].http.headers.common["Authorization"]="Bearer "+t,f.commit("loggedMusic"),this.$router.push("/compte/principal")}}},x=C,j=(s("cf25"),Object(b["a"])(x,r,o,!1,null,null,null)),k=j.exports,w=s("5f5b"),y=s("0628"),A=s.n(y),I=s("7207"),$=s.n(I),E=s("afa7"),M=s("28dd"),S=(s("4989"),s("ab8b"),s("f9e3"),s("2dd8"),s("8c4f")),P=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("main",{staticStyle:{"background-color":"#fff","max-width":"100%"}},[t._m(0),t._m(1),t._m(2),e("div",{staticClass:"apartat",attrs:{id:"experiencia"}},[e("div",{staticClass:"container"},[e("h2",[t._v("UNA EXPERIÈNCIA ÚNICA")]),e("p",[t._v("A la banda de la UJI sempre intentem dur a terme concerts innovadors i realitzar projectes més enllà del habitual en una banda")]),e("vue-plyr",[e("video",{attrs:{poster:s("45d5"),src:s("896b")}},[e("source",{attrs:{src:s("896b"),type:"video/mp4",size:"1440"}})])])],1)]),e("div",{staticClass:"apartat display-2",attrs:{id:"familia"}},[e("span",[e("animated-number",{attrs:{value:80,duration:1500,round:1}}),t._v(" + músics han passat per la banda UJI ")],1)]),t._m(3),e("div",{attrs:{id:"footer"}},[e("div",{staticClass:"container",attrs:{id:"contacte"}},[e("a",{attrs:{href:"https://www.instagram.com/bandauji/",target:"_blank"}},[e("InstagramIcon",{attrs:{size:"1.3x"}})],1),e("a",{attrs:{href:"https://www.facebook.com/AssociacioCulturalBandaUJI/",target:"_blank"}},[e("FacebookIcon",{attrs:{size:"1.3x"}})],1),e("a",{attrs:{href:"https://www.youtube.com/channel/UCe8CsHaWOy4_eUID3A3ACew",target:"_blank"}},[e("YoutubeIcon",{attrs:{size:"1.3x"}})],1),e("a",{attrs:{href:"mailto:bandauji@uji.es",target:"_blank"}},[e("MailIcon",{attrs:{size:"1.3x"}})],1)]),e("div",{staticClass:"copyright"},[t._v("Copyright (c) 2020 Copyright Holder All Rights Reserved.")])])])},z=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{},[s("div",{attrs:{id:"headerL"}},[s("a",{staticClass:"quadrat familia",attrs:{href:"#cartells"}}),s("a",{staticClass:"quadrat experiencies",attrs:{href:"#experiencia"}}),s("a",{staticClass:"quadrat rectangle barcelona",attrs:{href:"#descripcio"}})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"apartat",attrs:{id:"descripcio"}},[s("div",{staticClass:"container"},[s("h2",[t._v("FORMAR PART DE LA BANDA")]),s("p",[t._v(" Si eres membre de la comunitat universitària i toques algun instrument, com ara el saxo, la percussió, fagot, clarinet, flauta, trombó, tuba, o els que semblants que tradicionalment formen part d'una banda de música, no ho dubtes i forma part de la nostra associació, per fer promoció i imatge de la música en la Universitat. Intentarem fer concerts tant fora com dins de la nostra província, i fer de la música el nostre punt d'unió. ")]),s("p",[t._v(" La quota com a soci té un cost anual de tan sols 5 €, que utilitzem per a compra de material, fer intercanvis amb altres bandes, entre altres. ")]),s("p",[t._v(" Si estàs interessat no dubtes en contactar amb nosaltres, mitjançant el correu: bandauji@uji.es ")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"apartat",attrs:{id:"cartells"}},[e("div",{staticClass:"container"},[e("h2",[t._v("VARIETAT D'ACTUACIONS")]),e("p",[t._v(" Durant tot el curs realizem tot tipus d'actuacions, desde passacarrers fins a concerts simfònics ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4 col-sm-6 col-12 mb-3 mt-3"},[e("img",{staticClass:"img-fluid",attrs:{src:s("8a4e"),alt:"cartell Els compassos de la nostra música"}})]),e("div",{staticClass:"col-lg-4 d-sm-none d-lg-block col-sm-6 col-12 mb-3 mt-3"},[e("img",{staticClass:"img-fluid",attrs:{src:s("7aa3"),alt:"cartell Santa Cecília Castello 2019"}})]),e("div",{staticClass:"col-lg-4 col-sm-6 col-12 mb-3 mt-3"},[e("img",{staticClass:"img-fluid",attrs:{src:s("7020"),alt:"cartell Santa Cecília Castello 2019"}})])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"apartat",attrs:{id:"menador"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("img",{staticClass:"img-fluid",attrs:{src:s("965a"),alt:"cartell menador"}})]),e("div",{staticClass:"col-sm-8 info"},[e("h3",[t._v("Tens interès per la música i és una de les teves activitats pendents?")]),e("p",[t._v(" Des de la Banda de la UJI t'ajudem. Amb el Curs, per aprendre música, tots els dilluns de 19 a 20.30 de la vesprada, per tan sol 15€ al mes, amb reconeixement d'un crèdit per semestre i més prop de la ciutat de Castelló, realitzat en el Menador (antic edifici d'Hisenda). No ho dubtis, la música pot ser la teva activitat complementària, Apunta't!! Més informació al nostre correu ")])])])])])}],D=s("044d"),N=s.n(D),F={name:"landingPage",props:["msg","msgError"],components:{AnimatedNumber:N.a,InstagramIcon:p["i"],FacebookIcon:p["g"],MailIcon:p["j"],YoutubeIcon:p["r"]},data(){return{alertSucces:!1,alertWarning:!1}},mounted(){void 0!==this.msg&&(this.alertSucces=!0),void 0!==this.msgError&&(this.alertWarning=!0)}},q=F,O=(s("f8b2"),Object(b["a"])(q,P,z,!1,null,"d499c69c",null)),T=O.exports,R=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("div",{staticClass:"container"},[s("b-alert",{attrs:{dismissible:"",variant:"warning"},model:{value:t.errors.noCursActiu,callback:function(a){t.$set(t.errors,"noCursActiu",a)},expression:"errors.noCursActiu"}},[s("strong",[t._v("No hi ha cap curs actiu.")])])],1),s("div",{staticClass:"container"},[t.infoCargada?s("div",{staticClass:"card-columns"},[s("infomarcio-personal",{staticClass:"card",attrs:{music:t.music}}),s("assistenciaChart",{staticClass:"card",attrs:{info:t.infomarcio}}),s("DetallAssistenciaSemestres",{staticClass:"card",attrs:{info:t.infomarcio}}),s("concerts",{staticClass:"card",attrs:{info:t.curs.semestres,id:t.music._id}}),s("ultimCorreu",{staticClass:"card"}),s("estatCompte",{staticClass:"card border-0",attrs:{compteActiu:t.music.compte_actiu}})],1):t._e()])])},L=[],Y=s("bc3a"),U=s.n(Y),H=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"informacio-personal targeta"},[t._m(0),s("div",{staticClass:"contingut"},[s("table",{staticClass:"table table-borderless"},[s("tbody",[s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Nom")]),s("td",[t._v(t._s(t.music.nom))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Cognoms")]),s("td",[t._v(t._s(t.music.cognoms))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("DNI")]),s("td",[t._v(t._s(t.music.dni))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Al")]),s("td",[t._v(t._s(t.music.al))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Correu")]),s("td",[t._v(t._s(t.music.email))])]),t.music.telefon?s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Tel")]),s("td",[t._v(t._s(t.music.telefon))])]):t._e(),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Instrument")]),s("td",[t._v(t._s(t.music.instrument))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Tipus de compte")]),0===t.music.tipo_compte?s("td",[t._v("Músic")]):t._e(),1===t.music.tipo_compte?s("td",[t._v("Director")]):t._e(),2===t.music.tipo_compte?s("td",[t._v("M. Junta")]):t._e(),3===t.music.tipo_compte?s("td",[t._v("Administrador")]):t._e()]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Data registre")]),s("td",[t._v(t._s(t._f("moment")(t.music.data_registre,"DD, MMMM, YYYY"))+" | "+t._s(t._f("moment")(t.music.data_registre,"from")))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Data de naixement")]),s("td",[t._v(t._s(t._f("moment")(t.music.data_naixement,"DD, MMMM, YYYY")))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Sexe")]),s("td",[t._v(t._s(t.music.sexe))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("Nacionalitat")]),s("td",[t._v(t._s(t.music.nacionalitat))])])])])])])},B=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"header-targeta"},[s("h2",[t._v("Informació personal")])])}],G={name:"informacioPersonal",props:["music"],components:{},mounted(){console.log("music",this.music)}},J=G,V=Object(b["a"])(J,H,B,!1,null,null,null),W=V.exports,X=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"targeta"},[t._m(0),s("div",{staticClass:"grafic-wrapper"},[s("div",{staticClass:"c100 orange grafic",class:"p"+t.info.semestres[t.numeroSemetre].percentatge.toFixed(0)},[s("span",{staticClass:"tantpercent"},[t._v(t._s(t.info.semestres[t.numeroSemetre].percentatge.toFixed(0))+"%")]),t._m(1)])]),s("div",{staticClass:"contingut"},[s("div",{staticClass:"info text-center",staticStyle:{margin:"0 auto"}},[s("span",[t._v("Número d'assaijos")]),t._v(" "+t._s(t.info.semestres[t.numeroSemetre].assajosAssistits)+" de "+t._s(t.info.semestres[t.numeroSemetre].assajosSemestre)+" ")]),s("div",{staticClass:"alerta"},[t._v(" Per a poder demanar els 1.5 crèdits del semestre has de tindre com a mínim un 80% d’assistència ")])])])},Z=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"header-targeta"},[s("h2",[t._v("Assistència")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"slice"},[s("div",{staticClass:"bar"}),s("div",{staticClass:"fill"})])}];var Q={name:"AssistenciaChart",props:{info:Object},data(){return{numeroSemetre:-1,percentatge:""}},mounted(){let t=new Date;this.numeroSemetre=t.getMonth()>0&&t.getMonth()<7?1:0}},K=Q,tt=(s("feb8"),Object(b["a"])(K,X,Z,!1,null,"5c186631",null)),at=tt.exports,st=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"targeta"},[t._m(0),s("div",{staticClass:"contingut"},[s("table",{staticClass:"table table-borderless"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col",colspan:"1"}},[t._v(t._s(t.info.curs))]),s("th",{staticClass:"assistits-total"},[t._v("Assistits / total")]),s("th",{staticClass:"percentatge"},[t._v("%")])])]),s("tbody",[s("tr",[s("th",{attrs:{scope:"row"}},[t._v("1r trimestre")]),s("td",{staticClass:"assistits-total"},[t._v(t._s(t.info.semestres[0].assajosAssistits)+" de "+t._s(t.info.semestres[0].assajosSemestre))]),s("td",{staticClass:"percentatge"},[t._v(t._s(isFinite(t.info.semestres[0].percentatge)?t.info.semestres[0].percentatge.toFixed(0)+"%":"~"))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("2n trimestre")]),s("td",{staticClass:"assistits-total"},[t._v(t._s(t.info.semestres[1].assajosAssistits)+" de "+t._s(t.info.semestres[1].assajosSemestre))]),s("td",{staticClass:"percentatge"},[t._v(t._s(isFinite(t.info.semestres[1].percentatge)?t.info.semestres[1].percentatge.toFixed(0)+"%":"~"))])])])])])])},et=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"header-targeta"},[s("h2",[t._v("Semestres")])])}],it={name:"DetallAssistenciaSemestres",props:{info:Object}},rt=it,ot=(s("ce6c"),Object(b["a"])(rt,st,et,!1,null,"2b3c2168",null)),nt=ot.exports,ct=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"targeta"},[t._m(0),s("div",{staticClass:"contingut"},[t.actuacions.length>0?s("table",{staticClass:"table table-borderless"},[s("tbody",[t._l(t.actuacions,(function(a,e){return s("tr",{key:e},[s("th",{staticClass:"check",attrs:{scope:"row"}},[t._v(t._s(a.titol))]),s("td",{class:{rojet:!t.estara(e),verdet:t.estara(e)}},[s("span",{staticClass:"boto-actuacio transition"},[s("span",{staticClass:"icono icono-rojet"},[s("x-icon",{attrs:{size:"1x"}})],1),s("span",{staticClass:"accio accio-rojet"}),s("span",{staticClass:"accio accio-verdet"}),s("span",{staticClass:"icono icono-verdet"},[s("check-icon",{staticClass:"icono icono-verdet",attrs:{size:"1x"}})],1)])])])})),t._m(1)],2)]):s("div",[s("h5",[t._v("Encara no hi han actuacions programades 😓")])])])])},lt=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"header-targeta"},[s("h2",[t._v("Actuacions")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("td",{attrs:{colspan:"2"}},[t._v(" Pots anara a la secció d'actuacions per a canviar la teva assistència ")])])}],ut={name:"concerts",components:{CheckIcon:p["a"],XIcon:p["q"]},props:{info:Array,id:String},data(){return{actuacions:[]}},methods:{estara(t){let a=this.actuacions[t].assistents;return a.forEach(t=>{if(t._id===this.id)return!0}),!1}},mounted(){let t=new Date;this.info.forEach(a=>{a.actuacions.forEach(a=>{let s=Date.parse(a.data);s>t&&this.actuacions.push(a)})})}},mt=ut,dt=(s("409a"),Object(b["a"])(mt,ct,lt,!1,null,"7288b7e6",null)),ft=dt.exports,pt=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"targeta"},[t._m(0),s("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[t._m(1),t.marcat._id!==t.ultim._id?s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false"}},[t._v("Últim correu")])]):t._e()]),s("div",{staticClass:"tab-content"},[s("div",{staticClass:"tab-pane fade show active",attrs:{id:"home",role:"tabpanel","aria-labelledby":"home-tab"}},[s("small",[t._v("Assumpte")]),s("h3",[t._v(t._s(t.marcat.assumpte))]),s("hr"),s("span",{domProps:{innerHTML:t._s(t.marcat.html)}}),t.marcat.adjunts.length>0?s("div",[s("hr"),s("ul",{staticStyle:{"padding-left":"15px"}},t._l(t.marcat.adjunts,(function(a,e){return s("li",{key:e},[s("a",{attrs:{href:a.uri}},[t._v(t._s(a.nom))])])})),0)]):t._e()]),s("div",{staticClass:"tab-pane fade",attrs:{id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"}},[s("small",[t._v("Assumpte")]),s("h3",[t._v(t._s(t.ultim.assumpte))]),s("hr"),s("span",{domProps:{innerHTML:t._s(t.ultim.html)}}),t.ultim.adjunts.length>0?s("div",[s("hr"),s("ul",{staticStyle:{"padding-left":"15px"}},t._l(t.ultim.adjunts,(function(a,e){return s("li",{key:e},[s("a",{attrs:{href:a.uri}},[t._v(t._s(a.nom))])])})),0)]):t._e()])])])},vt=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"header-targeta"},[s("h3",[t._v("Newsletters")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link active",attrs:{id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true"}},[t._v("📌")])])}],ht={name:"Newsletters",data(){return{marcat:"",ultim:""}},methods:{carregarCorreus(){U.a.get("/docs/newsletters").then(t=>{const a=t.data;this.ultim=a.ultim,this.marcat=a.marcat}).catch(console.error)}},mounted(){this.carregarCorreus()}},bt=ht,gt=(s("0a35e"),Object(b["a"])(bt,pt,vt,!1,null,"1ce8faa6",null)),_t=gt.exports,Ct=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"targeta targeta-btn descativar"},[t.compteActiu?s("div",{staticClass:"btn btn-lg btn-block actiu"},[t._v(" COMPTE ACTIU ")]):s("div",{staticClass:"btn btn-lg btn-block descativat"},[t._v(" COMPTE NO ACTIU ")])])},xt=[],jt={name:"estatCompte",props:{compteActiu:Boolean}},kt=jt,wt=(s("02cf"),Object(b["a"])(kt,Ct,xt,!1,null,"69eb7fb0",null)),yt=wt.exports,At={name:"Principal",components:{infomarcioPersonal:W,assistenciaChart:at,DetallAssistenciaSemestres:nt,concerts:ft,ultimCorreu:_t,estatCompte:yt},data(){return{music:{},curs:{},errors:{noCursActiu:!1},infomarcio:{},infoCargada:!1,store:f}},methods:{carregarInfoMusic(){return U.a.get("/auth/info",{withCredentials:!0}).then(t=>{console.log(t),this.music=t.data.music})},carregarInfoCursActiu(){return U.a.get("/info/curs/actiu",{withCredentials:!0}).then(t=>{null===t.data.curs?this.errors.noCursActiu=!0:this.curs=t.data.curs})},calcularAssistencia(){this.errors.noCursActiu||(this.infomarcio.semestres=[],this.curs.semestres.forEach((t,a)=>{let s=0;t.assajos.forEach(t=>{t.assistents.includes(this.music._id)&&s++});let e=t.assajos.length,i=100*s/e;this.infomarcio.semestres.push({assajosAssistits:s,assajosSemestre:e,percentatge:i})}))}},mounted(){Promise.all([this.carregarInfoMusic(),this.carregarInfoCursActiu()]).then(()=>{2==this.music.tipo_compte?this.store.commit("esJunta"):3==this.music.tipo_compte&&this.store.commit("esAdmin"),this.infomarcio.curs=this.curs.curs,this.calcularAssistencia(),this.infoCargada=!0}).catch(t=>{console.log(t),this.$router.push("/")})}},It=At,$t=(s("5adf"),s("f874"),Object(b["a"])(It,R,L,!1,null,"b3b1c7fc",null)),Et=$t.exports,Mt=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"container mt-4"},[t.error?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),s("form",{staticClass:"mt-4",on:{submit:function(a){return a.preventDefault(),t.validator(a)}}},[s("small",{staticClass:"text-muted float-right"},[t._v("Els camps amb * són obligatoris")]),s("h4",{staticClass:"mb-3"},[t._v("Informació personal")]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"nom"}},[t._v("Nom *")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.nom,expression:"music.nom"}],staticClass:"form-control",attrs:{type:"text ",name:"nom",required:""},domProps:{value:t.music.nom},on:{input:function(a){a.target.composing||t.$set(t.music,"nom",a.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"cognoms"}},[t._v("Cognoms *")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.cognoms,expression:"music.cognoms"}],staticClass:"form-control",attrs:{type:"text ",name:"cognoms",required:""},domProps:{value:t.music.cognoms},on:{input:function(a){a.target.composing||t.$set(t.music,"cognoms",a.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"dni"}},[t._v("DNI")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.dni,expression:"music.dni"}],staticClass:"form-control",attrs:{type:"text ",name:"dni"},domProps:{value:t.music.dni},on:{input:function(a){a.target.composing||t.$set(t.music,"dni",a.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"instrument"}},[t._v("Intrument *")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.instrument,expression:"music.instrument"}],staticClass:"form-control",attrs:{type:"text ",name:"instrument",required:""},domProps:{value:t.music.instrument},on:{input:function(a){a.target.composing||t.$set(t.music,"instrument",a.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"data_naixement"}},[t._v("Data de naixement")]),s("b-form-datepicker",{attrs:{block:"","date-format-options":{day:"numeric",month:"numeric",year:"numeric"},"start-weekday":1},model:{value:t.music.data_naixement,callback:function(a){t.$set(t.music,"data_naixement",a)},expression:"music.data_naixement"}})],1),s("b-form-group",{attrs:{label:"Sexe"}},[s("b-form-radio-group",{attrs:{options:t.opcions_sexe},model:{value:t.music.sexe,callback:function(a){t.$set(t.music,"sexe",a)},expression:"music.sexe"}})],1),s("hr",{staticClass:"mt-4"}),s("h4",{staticClass:"mt-2"},[t._v("Informació de contacte")]),s("small",{staticClass:"text-muted mb-3"},[t._v(" Com a mínim has d'introduir un correu ja sigui el al o el teu personal ")]),s("div",{staticClass:"form-group mt-3"},[s("label",{attrs:{for:"al"}},[t._v("AL")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.al,expression:"music.al"}],staticClass:"form-control",attrs:{type:"text",name:"al"},domProps:{value:t.music.al},on:{input:function(a){a.target.composing||t.$set(t.music,"al",a.target.value)}}}),t._m(0)])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.email,expression:"music.email"}],staticClass:"form-control",attrs:{type:"text ",name:"email"},domProps:{value:t.music.email},on:{input:function(a){a.target.composing||t.$set(t.music,"email",a.target.value)}}})]),s("small",{staticClass:"form-text text-muted"},[t._v(" Si especifiques un correu s'utilitzarà aquesta per defecte ")])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"telefon"}},[t._v("Telefon")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.telefon,expression:"music.telefon"}],staticClass:"form-control",attrs:{type:"text ",name:"telefon"},domProps:{value:t.music.telefon},on:{input:function(a){a.target.composing||t.$set(t.music,"telefon",a.target.value)}}})])]),s("b-form-group",[s("b-form-checkbox",{attrs:{disabled:""===t.music.telefon},model:{value:t.music.grup_whatsapp,callback:function(a){t.$set(t.music,"grup_whatsapp",a)},expression:"music.grup_whatsapp"}},[t._v(" Vull que se m'afegeixi al grup de whatsapp ")])],1),s("hr",{staticClass:"mt-4"}),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Contrasenya")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.password,expression:"music.password"}],staticClass:"form-control",attrs:{type:"password",name:"password",required:""},domProps:{value:t.music.password},on:{focusout:t.validarContrasenya,input:function(a){a.target.composing||t.$set(t.music,"password",a.target.value)}}}),t._m(1)]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"confirm_password"}},[t._v("Repeteix la contrasenya")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.confirm_password,expression:"music.confirm_password"}],staticClass:"form-control",attrs:{type:"password",name:"confirm_password",required:""},domProps:{value:t.music.confirm_password},on:{focusout:t.validarContrasenya,input:function(a){a.target.composing||t.$set(t.music,"confirm_password",a.target.value)}}})]),s("hr",{staticClass:"mt-4"}),s("h4",{staticClass:"mt-2"},[t._v("Altres")]),s("b-form-group",[s("b-form-checkbox",{model:{value:t.music.llista_correu,callback:function(a){t.$set(t.music,"llista_correu",a)},expression:"music.llista_correu"}},[t._v(" Vull rebre correus informatius ")])],1),s("button",{staticClass:"btn btn-light btn-lg mt-3 mb-5 float-right",attrs:{type:"submit",name:"button"}},[t._v("Crear compte")]),s("b-button",{staticClass:"btn-lg mb-2 float-right mt-3 mb-5 mr-3",attrs:{variant:"info"},on:{click:function(a){return t.$router.push("/")}}},[t._v("Atras")])],1)])},St=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._v("@uji.es")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("small",{staticClass:"form-text text-muted",attrs:{id:"passwordHelpBlock"}},[s("ul",[s("li",[t._v("Entre 8 i 16 caràcters")]),s("li",[t._v("Com a mínim una lletra minúscula, una majuscula, un número i un caracter espcial")])])])}];const Pt=new RegExp(/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/);var zt={name:"signin",components:{},data(){return{error:"",music:{nom:"",cognoms:"",dni:"",al:null,email:"",telefon:"",instrument:"",data_naixement:null,data_registre:null,tipo_compte:0,compte_verificat:!1,password:"",confirm_password:"",llista_correu:!0,grup_whatsapp:!1},opcions_sexe:[{text:"Dona",value:"Dona"},{text:"Home",value:"Home"},{text:"Altre",value:"Altre"}],breadcrumb:[{text:"Principal",to:{path:"/"}},{text:"Crear compte",to:{path:"/"}}],store:void 0,API_URL:""}},created(){this.API_URL="/auth/registrar"},watch:{music:{handler(){this.error="",document.querySelectorAll("input[type=password]").forEach(t=>t.classList.remove("is-invalid"))},deep:!0}},methods:{validarContrasenya(t){console.log("validarContrasenya");const a=t.target,s=a.value;s.trim().length<8?(this.error="La contrasenya ha de tindre un mínim de 8 caracters",a.classList.add("is-invalid")):Pt.test(s)||(this.error="Comporova que la contrasenya tingui com a mínim una lletra minúscula, una majuscula i un número o caracter espcial",a.classList.add("is-invalid"))},submit(){U.a.post(this.API_URL,this.music).then(t=>{console.log(t)}).catch(t=>{console.log(t),this.error=t.message})},validator(){return console.log("validator"),this.music.password!=this.music.confirm_password?(this.error="Les constrasenyes no coincideixen",!1):this.music.password.trim().lenght<8?(this.error="La contrasenya ha de tindre un mínim de 8 caracters",!1):Pt.test(this.music.password)?void this.submit():(this.error="Comporova que la contrasenya tingui com a mínim una lletra minúscula, una majuscula i un número o caracter espcial",!1)}}},Dt=zt,Nt=Object(b["a"])(Dt,Mt,St,!1,null,"542e1c2a",null),Ft=Nt.exports,qt=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"container mt-4"},[t.error?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),s("form",{on:{submit:function(a){return a.preventDefault(),t.validator(a)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.email,expression:"music.email"}],staticClass:"form-control",attrs:{type:"text ",name:"email"},domProps:{value:t.music.email},on:{input:function(a){a.target.composing||t.$set(t.music,"email",a.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Contrasenya")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.music.password,expression:"music.password"}],staticClass:"form-control",attrs:{type:"password",name:"password",required:""},domProps:{value:t.music.password},on:{focusout:t.validarContrasenya,input:function(a){a.target.composing||t.$set(t.music,"password",a.target.value)}}})]),s("div",{staticClass:"pt-3"},[s("strong",[t._v(" Has oblidat la contrasenya? "),s("router-link",{attrs:{to:{path:"/recuperacio",params:{}}}},[t._v("clicka aquí!")])],1)]),s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-sm-3 d-none d-sm-block"},[s("b-button",{staticClass:"btn-lg btn-block mb-2",attrs:{variant:"info"},on:{click:function(a){return t.$router.push("/")}}},[t._v("Atras")])],1),t._m(0)])])])},Ot=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"col-sm-9"},[s("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"submit",name:"button"}},[t._v("Entrar")])])}];new RegExp("^.*(?=.{8,})((?=.*[!@#$%^&*()-_=+{};:,<.>]){1})(?=.*d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$");var Tt={name:"login",components:{},data(){return{error:"",loggingIn:!1,music:{email:"",password:""},store:f,API_URL:""}},watch:{music:{handler(){this.error="",document.querySelectorAll("input[type=password]").forEach(t=>t.classList.remove("is-invalid"))},deep:!0}},created(){this.API_URL="/auth/autenticacio"},methods:{validarContrasenya(t){},submit(){this.error="",this.loggingIn=!0;const t={email:this.music.email,password:this.music.password};U.a.post(this.API_URL,t).then(t=>{200===t.status&&"token"in t.data&&(this.$session.start(),this.$session.set("token",t.data.token),e["default"].http.headers.common["Authorization"]="Bearer "+t.data.token,f.commit("loggedMusic"),this.$router.push("/compte/principal"))}).catch(t=>{console.log(t),setTimeout(()=>{this.loggingIn=!1,this.error=t.message},1e3)})},validator(){this.submit()}}},Rt=Tt,Lt=Object(b["a"])(Rt,qt,Ot,!1,null,"2ff7b87e",null),Yt=Lt.exports,Ut=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{})},Ht=[],Bt={name:"logout",data(){return{store:f,API_URL:""}},created(){this.API_URL="/auth/logout"},mounted(){U.a.get(this.API_URL,{withCredentials:!0}).then(t=>{f.commit("logoutMusic"),this.$session.clear("token"),this.$router.push("/")}).catch(t=>{console.log(t)})}},Gt=Bt,Jt=Object(b["a"])(Gt,Ut,Ht,!1,null,"3ec619db",null),Vt=Jt.exports,Wt=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"compte"}},[s("aside",[s("ul",[s("li",[s("router-link",{attrs:{to:{path:"/compte/principal",params:{}}}},[t._v("Principal")])],1),s("li",[s("router-link",{attrs:{to:{path:"/compte/actuacions",name:"Actuacions",params:{}}}},[t._v("Actuacions")])],1),s("li",[s("router-link",{attrs:{to:{path:"/compte/preferencies",name:"Preferències",params:{}}}},[t._v("Preferències")])],1),t.store.getters.esJunta||t.store.getters.esAdmin?s("li",{staticStyle:{"background-color":"lightblue"}},[s("b-dropdown",{attrs:{id:"dropdown",variant:"link","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("span",{staticStyle:{color:"#444"}},[t._v("GESTIÓ")])]},proxy:!0}],null,!1,2698411362)},[s("b-dropdown-item",[s("router-link",{attrs:{to:{path:"/gestio/musics",params:{}}}},[t._v("Músics")])],1),s("b-dropdown-item",[s("router-link",{attrs:{to:{path:"/gestio/assitencia",params:{}}}},[t._v("Assitència")])],1),s("b-dropdown-item",[s("router-link",{attrs:{to:{path:"/gestio/assajos",params:{}}}},[t._v("Assajos")])],1),s("b-dropdown-item",[s("router-link",{attrs:{to:{path:"/gestio/cursos",params:{}}}},[t._v("Cursos")])],1),s("b-dropdown-item",[s("router-link",{attrs:{to:{path:"/gestio/actuacions",params:{}}}},[t._v("Actuacions")])],1),s("b-dropdown-item",[s("router-link",{attrs:{to:{path:"/gestio/credits",params:{}}}},[t._v("Crèdits")])],1),s("b-dropdown-item",[s("router-link",{attrs:{to:{path:"/gestio/newsletter",params:{}}}},[t._v("Newsletter")])],1)],1)],1):t._e(),s("li",[s("router-link",{attrs:{to:{path:"/compte/logout",name:"logout",params:{}}}},[t._v("Tancar sessió")])],1)])]),s("router-view")],1)},Xt=[],Zt={name:"Compte",data(){return{store:f}}},Qt=Zt,Kt=(s("212e"),Object(b["a"])(Qt,Wt,Xt,!1,null,"5e306608",null)),ta=Kt.exports,aa=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("div",{staticClass:"container-sm"},t._l(t.actuacions,(function(a,e){return s("b-card",{key:e,staticClass:"overflow-hidden mb-3",attrs:{"no-body":""}},[s("div",{staticClass:"custom-card"},[s("b-card-body",{attrs:{title:a.titol}},[s("b-card-text"),s("b-card-text",[s("h5",[t._v("Repertori:")]),s("ul",t._l(a.repertori,(function(a,e){return s("li",{key:e},[t._v(" "+t._s(a)+" ")])})),0)])],1)],1),s("div",{staticClass:"border rounded m-2"},[t.haAssistit(a.assistents)?s("div",{staticClass:"assistencia"},[s("button",{staticClass:"btn btn-danger float-right",attrs:{type:"button"},on:{click:function(s){return t.noAssistir(a._id)}}},[t._v("No hi podré assistir ;(")]),s("span",{staticClass:"si"}),t._v(" Assistiré ")]):s("div",{staticClass:"assistencia"},[s("button",{staticClass:"btn btn-success float-right",attrs:{type:"button"},on:{click:function(s){return t.assistir(a._id)}}},[t._v("Si que hi assistiré!!")]),s("span",{staticClass:"no"}),t._v(" No hi assistiré ")])])])})),1)])},sa=[],ea={name:"Actuacions",data(){return{actuacions:[],errors:{}}},methods:{avui(){return new Date},haAssistit(t){return t.includes(localStorage.id)},assistir(t){U.a.put("/info/actuacio/afegir/assistent",{idAssistent:localStorage.id,idActuacio:t}).then(t=>{this.actuacions=[],this.carregarInfo()}).catch(t=>{console.log(t)})},noAssistir(t){console.log("id actucaio",t),U.a.put("/info/actuacio/llevar/assistent",{idAssistent:localStorage.id,idActuacio:t}).then(t=>{this.actuacions=[],this.carregarInfo()}).catch(t=>{console.log(t)})},carregarInfo(){U.a.get("/info/actuacions/actiu",{withCredentials:!0}).then(t=>{if(null===t.data.curs)this.errors.noCursActiu=!0;else{let a=t.data.curs;a.semestres.forEach(t=>{t.actuacions.forEach(t=>{let a=Date.parse(t.data);a>=this.avui()&&this.actuacions.push(t)})})}}).catch(t=>{console.log(t)})}},mounted(){this.carregarInfo()}},ia=ea,ra=(s("28fb"),Object(b["a"])(ia,aa,sa,!1,null,"6be79894",null)),oa=ra.exports,na=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("vue-markdown",[t._v(" **test**")]),s("p",[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. ")]),s("p",[t._v(" Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ")])],1)},ca=[],la=s("9ce6"),ua=s.n(la),ma={name:"Assistència",components:{VueMarkdown:ua.a},data(){return{source:"#test"}}},da=ma,fa=Object(b["a"])(da,na,ca,!1,null,"57421d8e",null),pa=fa.exports,va=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",{staticClass:"pb-5"},[s("div",{staticClass:"mt-3 container-sm"},[s("b-overlay",{attrs:{show:!t.music.compte_actiu,rounded:"sm"},scopedSlots:t._u([{key:"overlay",fn:function(){return[s("h2",[t._v("El compte no està actiu")])]},proxy:!0}])},[s("b-form",{staticClass:"mb-3",on:{submit:t.onSubmit}},[s("b-card",{staticClass:"mb-3 transparent",attrs:{"border-variant":"info"},scopedSlots:t._u([{key:"header",fn:function(){return[s("small",{staticClass:"float-right"},[t._v("Informació necessaria per a obtenir els crèdits")])]},proxy:!0}])},[s("b-form-group",{attrs:{label:"Nom","label-for":"input-x"}},[s("b-form-input",{attrs:{id:"input-x",type:"text",required:""},model:{value:t.music.nom,callback:function(a){t.$set(t.music,"nom",a)},expression:"music.nom"}})],1),s("b-form-group",{attrs:{label:"Cognoms","label-for":"input-x"}},[s("b-form-input",{attrs:{id:"input-x",type:"text",required:""},model:{value:t.music.cognoms,callback:function(a){t.$set(t.music,"cognoms",a)},expression:"music.cognoms"}})],1),s("b-form-group",{attrs:{label:"Instrument","label-for":"input-x"}},[s("b-form-input",{attrs:{id:"input-x",type:"text",required:""},model:{value:t.music.instrument,callback:function(a){t.$set(t.music,"instrument",a)},expression:"music.instrument"}})],1),s("b-form-group",{attrs:{label:"DNI","label-for":"input-x"}},[s("b-form-input",{attrs:{id:"input-x",type:"text"},model:{value:t.music.dni,callback:function(a){t.$set(t.music,"dni",a)},expression:"music.dni"}})],1)],1),s("b-form-group",{attrs:{label:"AL","label-for":"input-x"}},[s("b-input-group",{attrs:{append:"@uji.es"}},[s("b-form-input",{attrs:{id:"input-x",type:"text"},model:{value:t.music.al,callback:function(a){t.$set(t.music,"al",a)},expression:"music.al"}})],1)],1),s("b-form-group",{attrs:{label:"Correu","label-for":"input-x",description:"Si no has introduit el teu al has d'introduir un correu de contacte"}},[s("b-form-input",{attrs:{id:"input-1",type:"email"},model:{value:t.music.email,callback:function(a){t.$set(t.music,"email",a)},expression:"music.email"}})],1),s("b-form-group",{attrs:{label:"Telefon","label-for":"input-x"}},[s("b-form-input",{attrs:{id:"input-1",type:"tel"},model:{value:t.music.telefon,callback:function(a){t.$set(t.music,"telefon",a)},expression:"music.telefon"}})],1),s("b-form-group",{attrs:{label:"Data de naixement","label-for":"input-x"}},[s("b-form-input",{attrs:{id:"input-x",type:"date"},model:{value:t.music.data_naixement,callback:function(a){t.$set(t.music,"data_naixement",a)},expression:"music.data_naixement"}})],1),s("b-form-group",{attrs:{label:"Tipus de compte","label-for":"input-x"}},[s("b-form-input",{attrs:{id:"input-x",type:"text",disabled:""},model:{value:t.music.tipo_compte,callback:function(a){t.$set(t.music,"tipo_compte",a)},expression:"music.tipo_compte"}})],1),s("b-form-group",{attrs:{label:"Registrat","label-for":"input-x"}},[s("b-form-input",{attrs:{id:"input-x",type:"text",disabled:""},model:{value:t.music.registratFa,callback:function(a){t.$set(t.music,"registratFa",a)},expression:"music.registratFa"}})],1),s("b-form-group",[s("b-form-checkbox",{model:{value:t.music.llista_correu,callback:function(a){t.$set(t.music,"llista_correu",a)},expression:"music.llista_correu"}},[t._v(" Vull rebre correus informatius ")])],1),s("b-button",{attrs:{type:"submit",variant:"info"}},[t._v("Guardar")])],1)],1),t.music.compte_actiu?s("b-card",{staticClass:"mt-5 mb-2 transparent",attrs:{"border-variant":"warning"}},[s("b-card-text",{staticClass:"flex-text"},[s("div",{},[s("h5",{staticClass:"m-0"},[t._v("Desactivar de forma temporal el compte")]),s("small",{},[t._v(" No sortiràs a llista d'assistència ")])]),s("b-button",{staticClass:"dreta",attrs:{variant:"warning"},on:{click:function(a){return t.demanarAutenticacio(t.desactivarUsuari)}}},[t._v("Desactivar ususari")])],1)],1):s("b-card",{staticClass:"mt-5 mb-2 transparent",attrs:{"border-variant":"success"}},[s("b-card-text",{staticClass:"flex-text"},[s("div",{},[s("h5",{staticClass:"m-0"},[t._v("Activar el compte")])]),s("b-button",{staticClass:"dreta",attrs:{variant:"success"},on:{click:function(a){return t.demanarAutenticacio(t.activarUsuari)}}},[t._v("Activar ususari")])],1)],1),s("b-card",{staticClass:"mt-3 mb-2 transparent ",attrs:{"border-variant":"danger"}},[s("b-card-text",{staticClass:"flex-text"},[s("h5",{staticClass:"m-0"},[t._v("Borrar de forma permanent el compte")]),s("b-button",{attrs:{variant:"danger"},on:{click:function(a){return t.demanarAutenticacio(t.borrarUsuari)}}},[t._v("Borrar ususari")])],1)],1),s("Confirmacio",{attrs:{email:t.music.email},on:{autenticat:t.accio}})],1)])},ha=[],ba=s("c1df"),ga=s.n(ba),_a=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-modal",{ref:"formulari",attrs:{id:"formulari",title:"Introdeix la teva contrasenya per a confirmar l'acció",size:"lg"},on:{ok:t.validarFormulari}},[s("form",{ref:"form",attrs:{novalidate:""},on:{submit:function(a){return a.stopPropagation(),a.preventDefault(),t.handleSubmit(a)}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.credencials.password,expression:"credencials.password"}],staticClass:"form-control",attrs:{type:"password",name:"password",required:""},domProps:{value:t.credencials.password},on:{input:function(a){a.target.composing||t.$set(t.credencials,"password",a.target.value)}}})])])])},Ca=[],xa={name:"Confirmacio",props:{email:String},data(){return{credencials:{email:"",password:""}}},methods:{validarFormulari(){this.credencials.email=this.email,U.a.post("/auth/autenticacio",this.credencials).then(t=>{200===t.status&&this.$emit("autenticat")}).catch(console.error)}}},ja=xa,ka=Object(b["a"])(ja,_a,Ca,!1,null,"5c03920c",null),wa=ka.exports,ya={name:"Configuracio",components:{Confirmacio:wa},data(){return{music:{},accio:"null"}},methods:{activarUsuari(){U.a.put(`/info/music/activar/${this.music._id}`,{withCredentials:!0}).then(t=>{console.log(t),this.music=t.data,this.modificacionsInfo()}).catch(console.error)},desactivarUsuari(){U.a.put(`/info/music/desactivar/${this.music._id}`,{withCredentials:!0}).then(t=>{console.log(t),this.music=t.data,this.modificacionsInfo()}).catch(console.error)},borrarUsuari(){U.a.delete(`/info/music/${this.music._id}`,{withCredentials:!0}).then(t=>{this.$router.push({path:"/",params:{msg:"Compte borrat correctament"}})}).catch(console.error)},demanarAutenticacio(t){this.accio=t,this.$bvModal.show("formulari")},modificacionsInfo(){this.music.data_naixement=this.music.data_naixement.split("T")[0],this.music.registratFa=ga()(this.music.data_registre,"YYYY-MM-DD").fromNow()},carregarInfoMusic(){return U.a.get("/auth/info",{withCredentials:!0}).then(t=>{this.music=t.data.music,this.modificacionsInfo()})},onSubmit(t){t.preventDefault(),U.a.put("/info/music",this.music).then(t=>{console.log(t),this.music=t.data,this.modificacionsInfo()}).catch(console.error)}},mounted(){this.carregarInfoMusic().then(console.log).catch(console.error)}},Aa=ya,Ia=(s("93a1"),Object(b["a"])(Aa,va,ha,!1,null,"5a9191e1",null)),$a=Ia.exports,Ea=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container mt-4"},[s("b-alert",{attrs:{variant:"success",show:t.enviatCorrectament}},[t._v("Si el correu coincideix amb un email registrar s'enviarà un correu amb les indicacions per recuperar el compte")]),s("b-alert",{attrs:{variant:"danger",show:""!==t.error}},[t._v(t._s(t.error))]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text ",name:"email"},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}})]),s("b-button",{staticClass:"btn mb-2 mt-4 float-right",attrs:{variant:"info"},on:{click:t.recuperar}},[t._v("Recuperar")])],1)],1)},Ma=[],Sa={name:"recuperacio",data(){return{email:"",enviatCorrectament:!1,error:""}},methods:{recuperar(){U.a.post("/auth/token_recuperacio").then(t=>{this.enviatCorrectament=!0}).catch(t=>{this.error="Ho sentim, no s'ha trovat el correu"})}}},Pa=Sa,za=Object(b["a"])(Pa,Ea,Ma,!1,null,"0d6d9864",null),Da=za.exports,Na=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{},[s("b-alert",{attrs:{variant:"success",show:""!=t.error}},[t._v(t._s(t.error))]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Contrasenya")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password",required:""},domProps:{value:t.password},on:{focusout:t.validarContrasenya,input:function(a){a.target.composing||(t.password=a.target.value)}}}),t._m(0)]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"confirm_password"}},[t._v("Repeteix la contrasenya")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm_password,expression:"confirm_password"}],staticClass:"form-control",attrs:{type:"password",name:"confirm_password",required:""},domProps:{value:t.confirm_password},on:{focusout:t.validarContrasenya,input:function(a){a.target.composing||(t.confirm_password=a.target.value)}}})]),s("button",{staticClass:"btn btn-light btn-lg mt-3 mb-5 float-right",attrs:{name:"button"},on:{click:t.actualitzar}},[t._v("Actualitzar")])],1)},Fa=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("small",{staticClass:"form-text text-muted",attrs:{id:"passwordHelpBlock"}},[s("ul",[s("li",[t._v("Entre 8 i 16 caràcters")]),s("li",[t._v("Com a mínim una lletra minúscula, una majuscula, un número i un caracter espcial")])])])}],qa={name:"Canviar la contrasenya",data(){return{password:"",confirm_password:"",error:""}},methods:{comprovarContrasenya(){return this.password!=this.confirm_password?(this.error="Les constrasenyes no coincideixen",!1):this.password.trim().lenght<8?(this.error="La contrasenya ha de tindre un mínim de 8 caracters",!1):!!lletra_numero_caracter.test(this.password)||(this.error="Comporova que la contrasenya tingui com a mínim una lletra minúscula, una majuscula i un número o caracter espcial",!1)},actualitzar(){const t=this.$route.params.jwt;this.comprovarContrasenya()&&t&&U.a.post("/auth/recuperar",{token:t,password:this.password}).then(()=>{this.$router.push("/login")}).catch(t=>{console.error(t)})}}},Oa=qa,Ta=Object(b["a"])(Oa,Na,Fa,!1,null,"9e0f487e",null),Ra=Ta.exports,La=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"gestio"}},[s("aside",[s("ul",[s("li",[s("router-link",{attrs:{to:{path:"/gestio/musics",params:{}}}},[t._v("Músics")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/assitencia",params:{}}}},[t._v("Assitència")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/assajos",params:{}}}},[t._v("Assajos")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/cursos",params:{}}}},[t._v("Cursos")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/actuacions",params:{}}}},[t._v("Actuacions")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/credits",params:{}}}},[t._v("Crèdits")])],1),s("li",[s("router-link",{attrs:{to:{path:"/gestio/newsletter",params:{}}}},[t._v("Newsletter")])],1),s("li",{staticStyle:{color:"#fff"}},[s("router-link",{attrs:{to:{path:"/compte/principal",params:{}}}},[t._v("Tornar")])],1),s("li",[s("router-link",{attrs:{to:{path:"/compte/logout",name:"logout",params:{}}}},[t._v("Tancar sessió")])],1)])]),s("router-view")],1)},Ya=[],Ua={},Ha=Ua,Ba=(s("51d8"),Object(b["a"])(Ha,La,Ya,!1,null,"487d46f4",null)),Ga=Ba.exports,Ja=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("div",{staticClass:"container"},[s("Selector",{ref:"info",attrs:{semestreId:t.semestreId,assaigId:t.assaigId,assajos:t.assajos},on:{"update:semestreId":function(a){t.semestreId=a},"update:semestre-id":function(a){t.semestreId=a},"update:assaigId":function(a){t.assaigId=a},"update:assaig-id":function(a){t.assaigId=a},"update:assajos":function(a){t.assajos=a}}}),s("span",{staticStyle:{"font-size":"1.5rem"}},[t._v("Assajos")]),s("div",{staticClass:"mt-1 mb-3"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.assaigId,expression:"assaigId"}],staticClass:"custom-select",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.assaigId=a.target.multiple?s:s[0]}}},t._l(t.assajos,(function(a){return s("option",{key:a._id,domProps:{value:a._id}},[t._v(t._s(t._f("moment")(a.data,"DD MMMM YYYY")))])})),0)]),s("div",{staticClass:"taula-wrapper"},[s("b-table",{directives:[{name:"show",rawName:"v-show",value:0!==Object.keys(t.assaig).length,expression:"Object.keys(assaig).length !== 0"}],ref:"taula",attrs:{hover:"",small:"",fixed:"",response:"",selectable:"","head-variant":"dark",responsive:"sm",items:t.llistatComplet,fields:t.fields},on:{"row-clicked":t.filaSeleccionada},scopedSlots:t._u([{key:"table-colgroup",fn:function(a){return t._l(a.fields,(function(t){return s("col",{key:t.key,style:{width:"selected"===t.key?"35px":""}})}))}},{key:"cell(selected)",fn:function(a){return[s("b-form-group",[s("b-form-checkbox",{attrs:{id:"checkbox"+a.item._id},model:{value:a.rowSelected,callback:function(s){t.$set(a,"rowSelected",s)},expression:"row.rowSelected"}})],1)]}}])})],1),s("b-button",{attrs:{variant:"info"},on:{click:function(a){return t.actualizarAssistencia(t.assaig)}}},[t._v("Actualitzar")])],1)])},Va=[],Wa=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row",attrs:{id:"selector"}},[s("div",{staticClass:"col-sm-10"},[s("span",{staticClass:"titol-selector"},[t._v("Curs")]),s("div",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.cursId,expression:"cursId"}],staticClass:"custom-select",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.cursId=a.target.multiple?s:s[0]}}},t._l(t.cursos,(function(a){return s("option",{key:a._id,domProps:{value:a._id}},[t._v(t._s(a.curs))])})),0)])]),s("div",{staticClass:"col-sm-2"},[s("span",{staticClass:"titol-selector"},[t._v("Semestre")]),s("div",[s("b-form-group",{attrs:{label:""}},[s("b-form-radio-group",{attrs:{options:t.options,buttons:""},model:{value:t.semestreId,callback:function(a){t.semestreId=a},expression:"semestreId"}})],1)],1)])])},Xa=[],Za={name:"Selector",props:{selectors:Array},model:{prop:"id",event:"update"},data(){return{cursos:[],curs:{},cursId:"",options:[],semestres:[],semestre:{},semestreId:"",actuacions:[],assajos:[]}},watch:{cursId:{handler(){this.curs=this.cursos.find(t=>t._id==this.cursId),this.actualizar(this.curs)}},semestreId:{handler(){this.semestre=this.semestres.find(t=>t.semestreId==this.semestreId),this.actuacions=this.semestre.actuacions,this.assajos=this.semestre.assajos,this.$emit("update:actuacions",this.actuacions),this.$emit("update:assajos",this.assajos)}}},methods:{carregarInfo(){U.a.get("/info/cursos",{withCredentials:!0}).then(t=>{t.data.cursos.forEach((t,a)=>{this.$set(this.cursos,a,t)});let a=this.cursos.find(t=>1==t.curs_actiu)||this.cursos[this.cursos.length-1],s=a._id;this.cursId!=s?(this.cursId=s,this.$emit("update:semestreId",this.semestreId)):(this.curs=this.cursos.find(t=>t._id==this.cursId),this.actualizar(this.curs)),this.actualizar(this.curs)}).catch(t=>{console.log(t)})},actualizar(t){t.semestres.forEach((t,a)=>{this.$set(this.semestres,a,t)}),this.seleccionarSemestreAdient(),this.options=this.semestres.map((t,a)=>({text:a+1,value:t.semestreId})),this.actuacions=this.semestre.actuacions,this.assajos=this.semestre.assajos,this.$emit("update:actuacions",this.actuacions),this.$emit("update:assajos",this.assajos)},seleccionarSemestreAdient(){let t=new Date,a=t.getMonth()>0&&t.getMonth()<7?2:1,s=this.semestres.find(t=>t.numero==a);this.semestreId!=s.semestreId?this.semestreId=s.semestreId:(this.semestre=this.semestres.find(t=>t.semestreId==this.semestreId),this.actuacions=this.semestre.actuacions,this.assajos=this.semestre.assajos,this.$emit("update:actuacions",this.actuacions),this.$emit("update:assajos",this.assajos)),this.$emit("update:semestreId",this.semestreId)}},mounted(){this.carregarInfo()}},Qa=Za,Ka=(s("9f3e"),Object(b["a"])(Qa,Wa,Xa,!1,null,"7749e90a",null)),ts=Ka.exports,as={name:"ControlAssistencia",components:{Selector:ts},data(){return{semestreId:0,assaigId:0,assajos:[],assaig:{},formulari:{},fields:[{key:"selected",label:"",tdClass:"sense-marge"},{key:"nom",sortable:!1},{key:"cognoms",sortable:!1},{key:"instrument",sortable:!1}],llistatComplet:[]}},watch:{assaigId:{handler(){this.assaig=this.assajos.find(t=>t._id==this.assaigId)}},assaig:{handler(){console.log("assaig actu"),this.llistatComplet.forEach((t,a)=>{console.log(this.assaig.assistents.includes(t._id)),this.assaig.assistents.includes(t._id)?this.$refs.taula.selectRow(a):this.$refs.taula.unselectRow(a)})}}},methods:{carregarInfo(){const t=U.a.get("/info/musics",{withCredentials:!0});return t.then(t=>{let a=Array.from(t.data.musics);return a.map(t=>t.selected=!1),a||[]}).catch(t=>{console.log(t)})},filaSeleccionada(t,a){this.assaig.assistents.includes(t._id)?(console.log("unselect",a),this.assaig.assistents.splice(a,1),this.llistatComplet[a].selected=!1):(this.assaig.assistents.push(t._id),this.llistatComplet[a].selected=!0)},actualizarAssistencia(t){U.a.put("/info/assaig/assistencia",{assaig:t}).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}},mounted(){this.carregarInfo().then(t=>{console.log(t),this.llistatComplet=t}).catch(t=>{console.log(t)})}},ss=as,es=(s("6f64"),Object(b["a"])(ss,Ja,Va,!1,null,"521c5e32",null)),is=es.exports,rs=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("div",{staticClass:"container"},[s("Selector",{ref:"info",attrs:{semestreId:t.semestreId,assajos:t.assajos},on:{"update:semestreId":function(a){t.semestreId=a},"update:semestre-id":function(a){t.semestreId=a},"update:assajos":function(a){t.assajos=a}}}),s("div",{staticClass:"mb-3",staticStyle:{height:"50px"}},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari",modifiers:{formulari:!0}}],staticClass:"btn btn-info btn-lg float-right",on:{click:function(a){return t.mostrarFormulari({},"Afegir assaig")}}},[t._v("CREAR ASSAIG")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari-programacio",modifiers:{"formulari-programacio":!0}}],staticClass:"btn btn-info btn-lg float-right mr-3",on:{click:function(a){return t.mostrarFormulari({},"Afegir assaig","formulari-programacio")}}},[t._v("PROGRAMAR ASSAJOS")]),s("div",{staticClass:"btn-like btn-light",attrs:{"aria-disabled":"true",tabindex:"-1"}},[t._v(t._s(t.assajos.length)+" Assajos")])],1),s("b-list-group",t._l(t.assajos,(function(a,e){return s("b-list-group-item",{key:e,staticClass:"flex-column align-items-center element"},[s("div",{staticClass:"w-100 justify-content-between"},[s("h5",{staticClass:"mb-1"},[t._v(t._s(t._f("moment")(a.data,"DD MMMM YYYY")))])]),s("div",{staticClass:"float-right botons"},[s("b-button",{attrs:{variant:"outline-danger"},on:{click:function(s){return t.eliminarAssaig(a._id)}}},[t._v("Eliminar")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari",modifiers:{formulari:!0}}],attrs:{variant:"outline-info"},on:{click:function(s){return t.mostrarFormulari(a,"Modificar assaig")}}},[t._v("Modificar")])],1),s("div",{staticClass:"inline"},[a.lloc?s("p",{staticClass:"mb-1"},[s("map-pin-icon",{attrs:{size:"1x"}}),t._v(" "+t._s(a.lloc)+" ")],1):t._e(),s("small",[t._v(" De "),s("strong",[t._v(t._s(a.hora_inici))]),t._v(" a "),s("strong",[t._v(t._s(a.hora_fi))])]),s("p",{staticClass:"mb-1"},[t._v(" Assistencia: "+t._s(a.assistencia)+" ")]),a.anotacio?s("p",{staticClass:"mb-1"},[t._v(" Anotació: "+t._s(a.anotacio)+" ")]):t._e()])])})),1)],1),s("AssaigForm",{attrs:{info:t.formulari,accio:t.enviarFormulari}}),s("ProgramarAssajos",{attrs:{info:t.formulari,accio:t.insertarAssajos}})],1)},os=[],ns=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-modal",{ref:"formulari",attrs:{id:"formulari",title:t.info.titol,size:"lg"},on:{ok:t.validarFormulari}},[t.info.assaig?s("form",{ref:"form",staticClass:"label-margin",attrs:{novalidate:""},on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[s("label",[t._v("Dia: *")]),s("b-form-datepicker",{attrs:{"date-format-options":{day:"numeric",month:"numeric",year:"numeric"},"start-weekday":1,state:t.datepicker_state,required:""},on:{input:function(a){t.datepicker_state=!0}},model:{value:t.info.assaig.data,callback:function(a){t.$set(t.info.assaig,"data",a)},expression:"info.assaig.data"}}),s("label",[t._v(" Hora inci: *")]),s("b-form-timepicker",{attrs:{locale:"es",state:t.hora_inici_state,required:""},on:{input:function(a){t.hora_inici_state=!0}},model:{value:t.info.assaig.hora_inici,callback:function(a){t.$set(t.info.assaig,"hora_inici",a)},expression:"info.assaig.hora_inici"}}),s("label",[t._v(" Hora fi: *")]),s("b-form-timepicker",{attrs:{locale:"es",state:t.hora_fi_state,required:""},on:{input:function(a){t.hora_fi_state=!0}},model:{value:t.info.assaig.hora_fi,callback:function(a){t.$set(t.info.assaig,"hora_fi",a)},expression:"info.assaig.hora_fi"}}),s("div",{staticClass:"relative"},[s("div",{staticClass:"invalid-tooltip",class:{display:t.inici_fi_state}},[t._v(" Comprova el horari del assaig ")])]),s("label",[t._v(" Lloc: ")]),s("b-form-input",{staticClass:"form-control",attrs:{id:"titol"},model:{value:t.info.assaig.lloc,callback:function(a){t.$set(t.info.assaig,"lloc",a)},expression:"info.assaig.lloc"}}),s("label",[t._v(" Nota: ")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.assaig.anotacio,expression:"info.assaig.anotacio"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.info.assaig.anotacio},on:{input:function(a){a.target.composing||t.$set(t.info.assaig,"anotacio",a.target.value)}}}),s("small",{staticClass:"form-text text-muted mb-2"},[t._v("* Camps obligatoris")])],1):t._e()])},cs=[],ls={name:"AssaigForm",props:{info:Object,accio:Function},data(){return{datepicker_state:null,hora_inici_state:null,hora_fi_state:null,inici_fi_state:null}},watch:{info:{handler(){this.info.assaig.data&&(this.info.assaig.data=this.info.assaig.data.split("T")[0]),this.datepicker_state=null,this.hora_inici_state=null,this.hora_fi_state=null,this.inici_fi_state=!1}}},methods:{validarFormulari(t){if(t.preventDefault(),void 0==this.info.assaig.hora_inici&&(this.hora_inici_state=!1),void 0==this.info.assaig.hora_fi&&(this.hora_fi_state=!1),void 0==this.info.assaig.data)this.datepicker_state=!1;else{const t=Date.parse(this.info.assaig.data+"T"+this.info.assaig.hora_inici),a=Date.parse(this.info.assaig.data+"T"+this.info.assaig.hora_fi);this.inici_fi_state=a<t}0!=this.hora_inici_state&&0!=this.info.assaig.hora_fi&&0!=this.datepicker_state&&0==this.inici_fi_state?(this.accio(this.info.assaig),this.$nextTick(()=>{this.$bvModal.hide("formulari")})):console.log("formulari incorrecte")}}},us=ls,ms=(s("8948"),Object(b["a"])(us,ns,cs,!1,null,"27a57360",null)),ds=ms.exports,fs=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-modal",{ref:"formulari",attrs:{id:"formulari-programacio",title:"Programar assajos",size:"lg"},on:{ok:t.validarFormulari,hidden:function(a){return t.resetejar()}}},[s("b-alert",{attrs:{dismissible:"",variant:"warning"},model:{value:t.alertaDiaSetmana,callback:function(a){t.alertaDiaSetmana=a},expression:"alertaDiaSetmana"}},[t._v(" Comprova que els dies seleccionats coincideixin amb el dia de la setmana ")]),s("b-alert",{attrs:{dismissible:"",variant:"warning"},model:{value:t.alertCrearAjassos,callback:function(a){t.alertCrearAjassos=a},expression:"alertCrearAjassos"}},[s("strong",[t._v("Primer has de crear els assajos")])]),t.info.assajos?s("form",{ref:"form",staticClass:"label-margin",attrs:{novalidate:""},on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[s("label",[t._v("Dia de la setmana")]),s("div",{staticClass:"text-center"},[s("b-form-group",{staticClass:"special",attrs:{label:""}},[s("b-form-radio-group",{attrs:{options:t.options,buttons:"","button-variant":"outline-secondary"},model:{value:t.info.assajos.dia,callback:function(a){t.$set(t.info.assajos,"dia",a)},expression:"info.assajos.dia"}})],1)],1),s("label",[t._v(" Hora inci: *")]),s("b-form-timepicker",{attrs:{locale:"es",required:""},model:{value:t.info.assajos.hora_inici,callback:function(a){t.$set(t.info.assajos,"hora_inici",a)},expression:"info.assajos.hora_inici"}}),s("label",[t._v(" Hora fi: *")]),s("b-form-timepicker",{attrs:{locale:"es",required:""},model:{value:t.info.assajos.hora_fi,callback:function(a){t.$set(t.info.assajos,"hora_fi",a)},expression:"info.assajos.hora_fi"}}),s("label",[t._v("Desde el:")]),s("b-form-datepicker",{attrs:{"date-format-options":{day:"numeric",month:"numeric",year:"numeric"},"start-weekday":1,required:""},model:{value:t.info.assajos.data_inici,callback:function(a){t.$set(t.info.assajos,"data_inici",a)},expression:"info.assajos.data_inici"}}),s("label",[t._v("Fins al:")]),s("b-form-datepicker",{attrs:{"date-format-options":{day:"numeric",month:"numeric",year:"numeric"},"start-weekday":1,required:""},model:{value:t.info.assajos.data_fi,callback:function(a){t.$set(t.info.assajos,"data_fi",a)},expression:"info.assajos.data_fi"}}),s("label",[t._v(" Lloc: ")]),s("b-form-input",{staticClass:"form-control",attrs:{id:"titol"},model:{value:t.info.assajos.lloc,callback:function(a){t.$set(t.info.assajos,"lloc",a)},expression:"info.assajos.lloc"}}),s("b-button",{staticClass:"mb-3 mt-2",class:{heartbeat:t.alertCrearAjassos},attrs:{variant:"outline-primary"},on:{click:t.crearAssajos}},[t._v("Crear assajos")]),t.dates.length>0?s("div",{staticClass:"container mb-2"},[s("label",{attrs:{for:""}},[t._v("Assajos:")]),s("b-list-group",t._l(t.dates,(function(a,e){return s("b-list-group-item",{key:e,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(t._f("moment")(a,"DD MMMM YYYY"))+" "),s("b-badge",{attrs:{href:"#",variant:"danger"}},[s("trash-2-icon",{attrs:{size:"1x"},on:{click:function(s){return t.borrarAssaig(a)}}})],1)],1)})),1)],1):t._e(),s("small",{staticClass:"form-text text-muted mb-2"},[t._v("* Camps obligatoris")])],1):t._e()],1)},ps=[],vs={name:"ProgramarAssajos",components:{Trash2Icon:p["n"]},props:{info:Object,accio:Function},data(){return{alertaDiaSetmana:!1,alertCrearAjassos:!1,dates:[],options:[{text:"dilluns",value:1},{text:"dimarts",value:2},{text:"dimecres",value:3},{text:"dijous",value:4},{text:"divendres",value:5},{text:"dissabte",value:6},{text:"diumenge",value:7}]}},methods:{actualitzarStats(){return!0},crearAssajos(){let t=this.actualitzarStats();if(t){const t=[];let s=this.info.assajos.data_inici.replace("-",""),e=this.info.assajos.data_fi.replace("-",""),i=ga()(s,"YYYYMMDD"),r=ga()(e,"YYYYMMDD"),o=this.info.assajos.dia;if(i.day()!=this.info.assajos.dia)return void(this.alertaDiaSetmana=!0);if(r.day()!=this.info.assajos.dia)return void(this.alertaDiaSetmana=!0);this.alertaDiaSetmana=!1;var a=i.clone();t.push(i);while(a.day(7+o).isBefore(r))a.day()==this.info.assajos.dia&&t.push(a.clone());t.push(r),t.forEach(t=>{this.dates.push(ga()(t).format("YYYY-MM-DD"))})}},borrarAssaig(t){let a=this.dates.indexOf(t);this.dates.splice(a,1)},validarFormulari(t){t.preventDefault();let a=this.actualitzarStats();if(!a)return;if(0==this.dates.length)return void(this.alertCrearAjassos=!0);const s=[],e=this.info.assajos.hora_inici,i=this.info.assajos.hora_fi,r=this.info.assajos.lloc;this.dates.forEach(t=>{s.push({data:t,hora_inici:e,hora_fi:i,lloc:r})}),console.log(typeof i),this.accio(s),this.$nextTick(()=>{this.dates=[],this.$bvModal.hide("formulari-programacio")})},resetejar(t){this.dates=[],this.alertaDiaSetmana=!1,this.alertCrearAjassos=!1}}},hs=vs,bs=(s("e814"),Object(b["a"])(hs,fs,ps,!1,null,"8ee8a230",null)),gs=bs.exports,_s={name:"GestioAssajos",components:{Selector:ts,AssaigForm:ds,ProgramarAssajos:gs,MapPinIcon:p["k"]},data(){return{semestreId:0,assajos:[],formulari:{}}},methods:{mostrarFormulari(t,a,s){if(0===Object.keys(t).length)var e={hora_inici:"19:30:00",hora_fi:"21:30:00"};else e=t;this.formulari={assaig:e,assajos:{dia:2,hora_inici:"19:30:00",hora_fi:"21:30:00"},titol:a},this.$bvModal.show(s)},enviarFormulari(t){U.a.put("/info/assaig",{assaig:t,semestreId:this.semestreId}).then(t=>{this.$refs.info.carregarInfo()}).catch(t=>{console.log(t)})},eliminarAssaig(t){U.a.delete(`/info/assaig/${t}`,{withCredentials:!0}).then(t=>this.$refs.info.carregarInfo()).catch(t=>console.log(t))},insertarAssajos(t){U.a.put("/info/assajos",{assajos:t,semestreId:this.semestreId}).then(t=>this.$refs.info.carregarInfo()).catch(t=>console.log(t))}}},Cs=_s,xs=(s("d4bf"),Object(b["a"])(Cs,rs,os,!1,null,"155b6cb8",null)),js=xs.exports,ks=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("div",{staticClass:"container"},[s("Selector",{ref:"info",attrs:{cursId:t.cursId,semestreId:t.semestreId,actuacioId:t.actuacioId,actuacions:t.actuacions},on:{"update:cursId":function(a){t.cursId=a},"update:curs-id":function(a){t.cursId=a},"update:semestreId":function(a){t.semestreId=a},"update:semestre-id":function(a){t.semestreId=a},"update:actuacioId":function(a){t.actuacioId=a},"update:actuacio-id":function(a){t.actuacioId=a},"update:actuacions":function(a){t.actuacions=a}}}),s("div",{},[t._l(t.actuacions,(function(a,e){return s("div",{key:e,staticClass:"card mb-4",attrs:{id:"actuacio"}},[s("h5",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-"+e,expression:"'collapse-' + index"}],staticClass:"card-header"},[t._v(" "+t._s(a.titol)+" ")]),s("b-collapse",{staticClass:"mt-2 text-normal",attrs:{id:"collapse-"+e}},[s("div",{staticClass:"card-body"},[a.data||a.hora_inici||a.hora_fi||a.lloc?s("div",{staticClass:"row alert alert-dia-lloc",attrs:{role:"alert"}},[s("div",{staticClass:"col-sm-6"},[s("div",{attrs:{id:"dia-hora"}},[s("strong",[t._v(t._s(t._f("moment")(a.data,"DD MMMM YYYY")))]),a.hora_inici&&a.hora_fi?s("span",[t._v(" de "),s("strong",[t._v(t._s(a.hora_inici))]),t._v(" a "),s("strong",[t._v(t._s(a.hora_fi))])]):a.hora_inici?s("span",[t._v(" a les "),s("strong",[t._v(t._s(a.hora_inici))])]):t._e()])]),s("div",{staticClass:"col-sm-6"},[a.lloc?s("div",{attrs:{id:"lloc"}},[s("a",{attrs:{href:a.lloc,target:"_blank"}},[t._v(t._s(a.lloc))]),s("map-pin-icon",{attrs:{size:"1x"}})],1):t._e()])]):t._e(),a.descripcio?s("p",{staticClass:"card-text"},[s("strong",[t._v("Descripó: ")]),t._v(t._s(a.descripcio)+" ")]):t._e(),a.repertori?s("div",[a.repertori.length>0?s("div",[s("strong",[t._v("Repertori:")]),s("ul",{attrs:{clas:"card-text"}},t._l(a.repertori,(function(a,e){return s("li",{key:e},[t._v(" "+t._s(a)+" ")])})),0)]):t._e()]):t._e(),s("strong",[t._v("Assistents:")]),a.assistents.length>0?s("LlistaMusics",{attrs:{llistat:a.assistents,nom:a.titol},on:{actualitzar:function(s){return t.mostrarFormulari(a,"Modificar assistents","formulari-assistencia-musics")}}}):s("div",[t._v(" No hi ha assistents "),s("span",{staticClass:"ml-2"},[s("user-plus-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari-assistencia-musics",modifiers:{"formulari-assistencia-musics":!0}}],staticClass:"boto",attrs:{size:"1.5x"},on:{click:function(s){return t.mostrarFormulari(a,"Modificar assistents","formulari-assistencia-musics")}}})],1)])],1),t._v(" "),s("div",{staticClass:"card-footer text-muted"},[s("div",{staticClass:"btn-editar row"},[s("div",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari",modifiers:{formulari:!0}}],staticClass:"col-sm-6 editar",on:{click:function(s){return t.mostrarFormulari(a,"Modificar actuació")}}},[s("edit-3-icon",{attrs:{size:"1.5x"}})],1),s("div",{staticClass:"col-sm-6 borrar",on:{click:function(s){return t.borrar(a._id)}}},[s("trash-2-icon",{attrs:{size:"1.5x"}})],1)])])])],1)})),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari",modifiers:{formulari:!0}}],staticClass:"btn btn-info btn-lg float-right mt-3",on:{click:function(a){return t.mostrarFormulari({},"Nova actuació")}}},[t._v("CREAR ACTUACIÓ")])],2)],1),s("ActuacioForm",{attrs:{info:t.formulari,accio:t.enviarFormulari}}),s("AssistenciaMusics",{attrs:{formulari:t.formulari,accio:t.modificarAssistents}})],1)},ws=[],ys=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"mt-2"},[s("b-table",{attrs:{striped:"",hover:"",borderless:"",responsive:"","sticky-header":"500px",items:t.llistat,fields:t.fields}}),s("div",{staticClass:"accions"},[s("span",[t._v(t._s(t.accio))]),s("user-plus-icon",{staticClass:"boto",attrs:{size:"1.5x"},on:{click:t.demanarActualitzacio,mouseover:function(a){t.accio="Modificar assistents"},mouseleave:function(a){t.accio=""}}}),s("download-icon",{staticClass:"boto",attrs:{size:"1.5x"},on:{click:t.descargar,mouseover:function(a){t.accio="Descarar llista com a CVS"},mouseleave:function(a){t.accio=""}}}),s("img",{staticStyle:{height:"25px"},attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg"},on:{mouseover:function(a){t.accio="Descarar llista com a PFD"},mouseleave:function(a){t.accio=""}}})],1)],1)},As=[],Is={name:"LlistaMusics",props:{llistat:Array,nom:String},components:{DownloadIcon:p["b"],UserPlusIcon:p["p"]},data(){return{fields:[{key:"nom",sortable:!0},{key:"cognoms",sortable:!0},{key:"instrument",sortable:!0}],accio:""}},methods:{descargarPDF(){var t=new jsPDF("p","pt");let a=20,s=[];this.llistat.forEach(t=>{s.push([t.cognoms,t.nom,t.instrument,"                                             "])}),t.autoTable({styles:{theme:"plain"},margin:{top:a},head:[["Cognoms","Nom","instrument"," ~ "]],body:s}),t.save(`Assistència ${this.nom}.pdf`)},descargar(){console.log(this.nom);let t="data:text/csv;charset=utf-8,Nom, Cognoms, Intrument, Anotació \n"+this.llistat.map(t=>`${t.nom}, ${t.cognoms}, ${t.instrument}, `).join("\n");console.log(t);var a=encodeURI(t),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",`Assistència ${this.nom}.csv`),document.body.appendChild(s),s.click()},demanarActualitzacio(){this.$emit("actualitzar")}}},$s=Is,Es=(s("e4a8"),Object(b["a"])($s,ys,As,!1,null,"4a87ad89",null)),Ms=Es.exports,Ss=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-modal",{ref:"formulari",attrs:{id:"formulari",title:t.info.titol,size:"lg"},on:{ok:t.validarFormulari}},[t.info.actuacio?s("form",{ref:"form",staticClass:"label-margin",attrs:{novalidate:""},on:{submit:function(a){return a.stopPropagation(),a.preventDefault(),t.validarFormulari(a)}}},[s("label",{attrs:{for:"titol"}},[t._v("Titol:")]),s("b-form-input",{staticClass:"form-control",attrs:{id:"titol",state:t.estat,required:""},model:{value:t.info.actuacio.titol,callback:function(a){t.$set(t.info.actuacio,"titol",a)},expression:"info.actuacio.titol"}}),s("label",{attrs:{for:""}},[t._v("Dia: "),s("span",{attrs:{id:"tooltip-target-1"}},[s("info-icon",{attrs:{size:"1x"}})],1)]),s("b-form-datepicker",{attrs:{"date-format-options":{day:"numeric",month:"numeric",year:"numeric"},"start-weekday":1},model:{value:t.info.actuacio.data,callback:function(a){t.$set(t.info.actuacio,"data",a)},expression:"info.actuacio.data"}}),s("b-tooltip",{attrs:{target:"tooltip-target-1",triggers:"hover"}},[t._v(" Fins que la actuació no tingui data "),s("strong",[t._v("NO ES CREARÀ")]),t._v(" el event a Google Calendar ")]),s("label",{attrs:{for:""}},[t._v("Hora inci:")]),s("b-form-timepicker",{attrs:{locale:"en"},model:{value:t.info.actuacio.hora_inici,callback:function(a){t.$set(t.info.actuacio,"hora_inici",a)},expression:"info.actuacio.hora_inici"}}),s("label",{attrs:{for:""}},[t._v("Hora fi:")]),s("b-form-timepicker",{attrs:{locale:"en"},model:{value:t.info.actuacio.hora_fi,callback:function(a){t.$set(t.info.actuacio,"hora_fi",a)},expression:"info.actuacio.hora_fi"}}),s("label",{attrs:{for:""}},[t._v("Repertori:")]),s("small",{staticClass:"form-text text-muted mb-2",attrs:{id:"emailHelp"}},[t._v("Escriure les obres separades per comes")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.actuacio.repertori_str,expression:"info.actuacio.repertori_str"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.info.actuacio.repertori_str},on:{input:function(a){a.target.composing||t.$set(t.info.actuacio,"repertori_str",a.target.value)}}}),s("label",{attrs:{for:"localitzacio"}},[t._v("Localització:")]),s("small",{staticClass:"form-text text-muted mb-2",attrs:{id:"emailHelp"}},[t._v("Pegar el codi plus ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.actuacio.lloc,expression:"info.actuacio.lloc"}],staticClass:"form-control",attrs:{type:"text",name:"localitzacio",id:"localitzacio"},domProps:{value:t.info.actuacio.lloc},on:{input:function(a){a.target.composing||t.$set(t.info.actuacio,"lloc",a.target.value)}}}),s("label",{attrs:{for:""}},[t._v("Descripció:")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.actuacio.descripcio,expression:"info.actuacio.descripcio"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.info.actuacio.descripcio},on:{input:function(a){a.target.composing||t.$set(t.info.actuacio,"descripcio",a.target.value)}}})],1):t._e()])},Ps=[],zs={name:"ActuacioForm",components:{InfoIcon:p["h"]},props:{info:Object,accio:Function},data(){return{estat:null}},watch:{info:{handler(){this.info.actuacio.repertori&&this.info.actuacio.repertori.length>0&&(this.info.actuacio.repertori_str=this.info.actuacio.repertori.join(", ")),this.info.actuacio.data&&(this.info.actuacio.data=this.info.actuacio.data.split("T")[0])}}},methods:{validarFormulari(t){t.preventDefault(),this.estat=this.$refs.form.checkValidity(),this.info.actuacio.titol&&""!=this.info.actuacio.titol&&(this.info.actuacio.repertori_str&&(this.info.actuacio.repertori=this.info.actuacio.repertori_str.split(/,|, /)),this.accio(this.info.actuacio),this.$nextTick(()=>{this.estat=null,this.$bvModal.hide("formulari")}))}}},Ds=zs,Ns=Object(b["a"])(Ds,Ss,Ps,!1,null,null,null),Fs=Ns.exports,qs=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-modal",{ref:"assistencia",attrs:{id:"formulari-assistencia-musics",title:"Assistència",size:"lg",centered:""},on:{ok:t.validar}},[s("div",{staticClass:"padding-modal-body"},[s("b-table",{ref:"taula",attrs:{striped:"",hover:"",responsive:"",selectable:"","b-table-select-multi":"","sticky-header":"500px",items:t.carregarInfo,fields:t.fields,busy:t.isBusy},on:{"update:busy":function(a){t.isBusy=a}}})],1)])},Os=[],Ts={name:"AssistenciaMusics",data(){return{isBusy:!1,fields:[{key:"nom",sortable:!1},{key:"cognoms",sortable:!1},{key:"instrument",sortable:!1}],llistatMusics:[]}},props:{accio:Function,formulari:Object},watch:{isBusy:{handler(){if(!this.isBusy){let t=this.formulari.actuacio.assistents,a=t.map(t=>t._id);this.llistatMusics.forEach((t,s)=>{a.includes(t._id)&&this.$refs.taula.selectRow(s)})}}}},methods:{validar(){let t=[];this.llistatMusics.forEach((a,s)=>{this.$refs.taula.isRowSelected(s)&&(this.llistatMusics.includes(a._id)||t.push(a._id))}),console.log("validar",t),this.accio(t)},carregarInfo(){const t=U.a.get("/info/musics",{withCredentials:!0});return t.then(t=>(this.llistatMusics=Array.from(t.data.musics),this.llistatMusics||[])).catch(t=>{console.log(t)})}}},Rs=Ts,Ls=(s("ed72"),Object(b["a"])(Rs,qs,Os,!1,null,"16e677a3",null)),Ys=Ls.exports,Us={name:"GestioActuacions",components:{Selector:ts,LlistaMusics:Ms,AssistenciaMusics:Ys,MapPinIcon:p["k"],Trash2Icon:p["n"],Edit3Icon:p["c"],ActuacioForm:Fs,UserPlusIcon:p["p"]},data(){return{cursId:0,semestreId:0,actuacioId:0,actuacions:[],formulari:{}}},methods:{mostrarFormulari(t,a,s){this.formulari={actuacio:{...t},titol:a},this.$bvModal.show(s)},modificarAssistents(t){const a=this.formulari.actuacio._id;U.a.put("/info/actuacio/assistents",{actuacioId:a,assistents:t}).then(t=>{this.$refs.info.carregarInfo()}).catch(t=>console.log(t))},enviarFormulari(t){U.a.put("/info/actuacio",{actuacio:t,semestreId:this.semestreId}).then(t=>{this.$refs.info.carregarInfo()}).catch(t=>console.log(t))},borrar(t){U.a.delete(`/info/actuacio/${t}`,{withCredentials:!0}).then(t=>{this.$refs.info.carregarInfo()}).catch(t=>{console.log(t)})}}},Hs=Us,Bs=(s("ef40"),Object(b["a"])(Hs,ks,ws,!1,null,"623c675f",null)),Gs=Bs.exports,Js=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("div",{staticClass:"container"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari",modifiers:{formulari:!0}}],staticClass:"btn btn-info btn-lg mt-3 mb-3",attrs:{block:""},on:{click:function(a){return t.mostrarFormulari({},"Nou curs")}}},[t._v("CREAR CURS")]),t._l(t.cursos,(function(a,e){return s("div",{key:e,staticClass:"card mb-4",attrs:{id:"cursos"}},[s("h5",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-"+e,expression:"'collapse-' + index"}],staticClass:"card-header"},[a.curs_actiu?s("div",{staticClass:"curs-actual"},[s("star-icon",{attrs:{size:"1x"}})],1):t._e(),t._v(" "+t._s(a.curs)+" ")]),s("b-collapse",{staticClass:"text-normal",attrs:{id:"collapse-"+e}},[a.curs_actiu?s("div",{staticClass:"curs-actual-badge"},[t._v(" curs actual ")]):t._e(),s("div",{staticClass:"card-body"},[s("p",{staticClass:"card-text"},[s("strong",[t._v("Director:")]),t._v(" "+t._s(a.director)+" ")]),s("p",{staticClass:"card-text"},[s("strong",[t._v("Anotacions: ")]),t._v(" "+t._s(a.anotacio)+" ")])]),s("div",{staticClass:"card-body botons"},[s("b-button",{attrs:{variant:"outline-danger"},on:{click:function(s){return t.eliminarCurs(a._id)}}},[t._v("Eliminar")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari",modifiers:{formulari:!0}}],attrs:{variant:"outline-info"},on:{click:function(s){return t.mostrarFormulari(a,"Modificar curs")}}},[t._v("Modificar")])],1)])],1)}))],2),s("CursForm",{attrs:{info:t.formulari,accio:t.enviarFormulari}})],1)},Vs=[],Ws=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-modal",{ref:"formulari",attrs:{id:"formulari",title:t.info.titol,size:"lg"},on:{ok:t.validarFormulari}},[s("form",{ref:"form",attrs:{novalidate:""},on:{submit:function(a){return a.stopPropagation(),a.preventDefault(),t.handleSubmit(a)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"curs"}},[t._v("Curs acadèmic")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.curs.curs,expression:"info.curs.curs"}],staticClass:"form-control",attrs:{type:"text",name:"curs",id:"curs",required:""},domProps:{value:t.info.curs.curs},on:{input:function(a){a.target.composing||t.$set(t.info.curs,"curs",a.target.value)}}}),s("small",{staticClass:"form-text text-muted mb-2",attrs:{id:"emailHelp"}},[t._v("El format ha de ser "),s("strong",[t._v("<curs inici>/<curs fi>")])]),s("label",{attrs:{for:"director"}},[t._v("Director titular")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.curs.director,expression:"info.curs.director"}],staticClass:"form-control",attrs:{type:"text",name:"director",id:"director"},domProps:{value:t.info.curs.director},on:{input:function(a){a.target.composing||t.$set(t.info.curs,"director",a.target.value)}}}),s("b-form-checkbox",{staticClass:"mt-2",attrs:{id:"cursActiu",name:"cursActiu",switch:""},model:{value:t.info.curs.curs_actiu,callback:function(a){t.$set(t.info.curs,"curs_actiu",a)},expression:"info.curs.curs_actiu"}},[t._v("Curs actiu")]),s("label",{attrs:{for:"anotacio"}},[t._v("Anotació")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.curs.anotacio,expression:"info.curs.anotacio"}],staticClass:"form-control",attrs:{name:"anotacio"},domProps:{value:t.info.curs.anotacio},on:{input:function(a){a.target.composing||t.$set(t.info.curs,"anotacio",a.target.value)}}})],1)])])},Xs=[],Zs={name:"CursForm",props:{info:Object,accio:Function},methods:{validarFormulari(){this.info.curs.curs&&this.info.curs.curs.length>0&&(this.accio(this.info.curs),this.$refs["formulari"].hide())}}},Qs=Zs,Ks=Object(b["a"])(Qs,Ws,Xs,!1,null,"bf069774",null),te=Ks.exports,ae={components:{StarIcon:p["m"],CursForm:te},data(){return{cursId:0,cursos:[],formulari:{curs:{},titol:""}}},methods:{demanarInfo(){U.a.get("/info/cursos",{withCredentials:!0}).then(t=>{this.cursos=t.data.cursos}).catch(t=>console.log(t))},mostrarFormulari(t,a){this.formulari={curs:{...t},titol:a}},enviarFormulari(){U.a.put("/info/curs",this.formulari.curs).then(t=>{console.log(t),this.demanarInfo()}).catch(t=>console.log(t))},eliminarCurs(t){U.a.delete(`/info/curs/${t}`,{withCredentials:!0}).then(t=>{console.log(t),this.demanarInfo()}).catch(t=>console.log(t))}},mounted(){this.demanarInfo()}},se=ae,ee=(s("6dc6"),Object(b["a"])(se,Js,Vs,!1,null,"7ac5edf0",null)),ie=ee.exports,re=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("div",{staticClass:"container"},[s("Selector",{ref:"info",attrs:{assajos:t.assajos},on:{"update:assajos":function(a){t.assajos=a}}}),s("div",{staticClass:"mb-3 accions-taula"},[s("button",{directives:[{name:"b-modal",rawName:"v-b-modal.formulari",modifiers:{formulari:!0}}],staticClass:"btn btn-primary float-right mr-1 mt-4",attrs:{type:"button",name:"button"}},[t._v("Enviar Certificats")]),s("h5",[t._v("Filtrar")]),s("b-form-group",{staticClass:"mb-0",attrs:{label:"","label-size":"sm"}},[s("b-form-checkbox",{attrs:{value:"true"},model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}},[t._v("Compleixen el requisit")])],1)],1),s("div",{staticClass:"taula-wrapper"},[s("b-table",{ref:"taula",attrs:{hover:"",small:"",fixed:"",response:"",selectable:"","head-variant":"dark",responsive:"sm",items:t.taula,fields:t.fields,"tbody-tr-class":t.rowClass,filter:t.filter},scopedSlots:t._u([{key:"table-colgroup",fn:function(a){return t._l(a.fields,(function(t){return s("col",{key:t.key,style:{width:"selected"===t.key?"35px":""}})}))}},{key:"cell(generarCertificat)",fn:function(a){return[s("b-form-group",[s("b-form-checkbox",{attrs:{id:"checkbox"+a.index},model:{value:a.item.generarCertificat,callback:function(s){t.$set(a.item,"generarCertificat",s)},expression:"row.item.generarCertificat"}})],1)]}}])})],1)],1),s("OpcionsEnvioCertificats",{on:{cagar:function(a){return t.enviarInfoCertificats(a)}}})],1)},oe=[],ne=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-modal",{ref:"formulari",attrs:{id:"formulari",title:"Opcions certificat",size:"xl"},on:{ok:t.validarFormulari}},[s("form",{ref:"form",attrs:{novalidate:""},on:{submit:function(a){return a.stopPropagation(),a.preventDefault(),t.handleSubmit(a)}}},[s("div",{staticClass:"form-group"},[s("h4",[t._v("Informació per al certificat")]),s("label",{attrs:{for:"curs"}},[t._v("Periode de l'assistència")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.periode,expression:"info.periode"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.info.periode},on:{input:function(a){a.target.composing||t.$set(t.info,"periode",a.target.value)}}}),s("small",{staticClass:"form-text text-muted mb-2"},[t._v("El periode en mesos durant els quals han assistit a l'activitat")]),s("hr"),s("h4",[t._v("Informació per al correu")]),s("label",{attrs:{for:"director"}},[t._v("Cos del correu")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.correu.markdown,expression:"info.correu.markdown"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.info.correu.markdown},on:{input:function(a){a.target.composing||t.$set(t.info.correu,"markdown",a.target.value)}}}),s("small",{staticClass:"text-muted float-right mt-2"},[t._v(" Accepta estils markdown "),s("a",{attrs:{href:"https://www.markdownguide.org/basic-syntax/",target:"_blank"}},[s("external-link-icon",{staticClass:"custom-class",attrs:{size:"1.2x"}})],1)]),s("h5",{staticClass:"mt-4"},[t._v("Previsualització")]),s("vue-markdown",{ref:"sortidaHtml",staticClass:"previsualitzacio",attrs:{source:t.info.correu.markdown}})],1)])])},ce=[],le={name:"OpcionsEnvioCertificats",components:{VueMarkdown:ua.a,ExternalLinkIcon:p["d"]},data(){return{info:{periode:"",correu:{cos:"",markdown:""}}}},methods:{validarFormulari(t){t.preventDefault(),this.info.cos=this.$refs.sortidaHtml.$el.innerHTML,""!==this.info.periode&&""!==this.info.correu.cos&&this.$nextTick(()=>{this.$emit("cagar",this.info),this.$bvModal.hide("formulari")})}}},ue=le,me=(s("23a1"),Object(b["a"])(ue,ne,ce,!1,null,"1b55973a",null)),de=me.exports,fe={name:"GestioCredits",components:{Selector:ts,OpcionsEnvioCertificats:de},data(){return{assajos:[],musics:[],taula:[],filter:null,fields:[{key:"nom",sortable:!1},{key:"cognoms",sortable:!1},{key:"instrument",sortable:!1},{key:"numAssajosAssistits",label:"Assistits",sortable:!1},{key:"totalAssajosSemestre",label:"Total assajos",sortable:!1},{key:"percentatgeStr",label:"percentatge",sortable:!1},{key:"generarCertificat",label:"Generar certificat",sortable:!1,tdClass:"sense-marge"}],opcions:null}},watch:{assajos:{handler(){this.musics.length>0&&this.contabilitzarAssistencia()}},musics:{handler(){this.assajos.length>0&&this.contabilitzarAssistencia()}}},methods:{rowClass(t,a){if(t&&"row"===a)return t.generarCertificat?"table-success":void 0},contabilitzarAssistencia(){this.taula=[];let t=this.assajos.length;this.musics.forEach(a=>{let s=0;this.assajos.forEach(t=>{t.assistents.includes(a._id)&&s++});let e=100*s/t,i=isFinite(e)?e.toFixed(0)+"%":"~";this.taula.push({_id:a._id,email:a.email,nom:a.nom,cognoms:a.cognoms,instrument:a.instrument,dni:a.dni,numAssajosAssistits:s,totalAssajosSemestre:t,percentatgeNum:e,percentatgeStr:i,generarCertificat:e>80})})},enviarInfoCertificats:function(t){const a=[];this.taula.forEach(t=>{t.generarCertificat&&a.push(t)});const s={infoMusics:a,opcions:t};U.a.post("/docs/certificats",s).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}},mounted(){U.a.get("/info/musics",{withCredentials:!0}).then(t=>{this.musics=t.data.musics}).catch(t=>{console.error(t)})}},pe=fe,ve=(s("c0ae"),Object(b["a"])(pe,re,oe,!1,null,"3820056a",null)),he=ve.exports,be=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",{staticStyle:{"padding-bottom":"20px"}},[s("div",{staticClass:"container mb-5"},[s("b-form",{on:{submit:t.enviar}},[s("h4",[t._v("Assumpte")]),s("b-form-input",{attrs:{placeholder:"Assumpte",required:""},model:{value:t.assumpte,callback:function(a){t.assumpte=a},expression:"assumpte"}}),s("h4",{staticClass:"mt-4"},[t._v(" Missatge "),s("eye-off-icon",{directives:[{name:"show",rawName:"v-show",value:t.mostrarMarkdonw,expression:"mostrarMarkdonw"}],staticClass:"float-right mr-3",attrs:{size:"1x"},on:{click:function(a){t.mostrarMarkdonw=!1}}}),s("eye-icon",{directives:[{name:"show",rawName:"v-show",value:!t.mostrarMarkdonw,expression:"!mostrarMarkdonw"}],staticClass:"float-right mr-3",attrs:{size:"1x"},on:{click:function(a){t.mostrarMarkdonw=!0}}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.mostrarMarkdonw,expression:"mostrarMarkdonw"}]},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.markdown,expression:"markdown"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.markdown},on:{input:function(a){a.target.composing||(t.markdown=a.target.value)}}}),s("small",{staticClass:"text-muted float-right mt-2 mb-2"},[t._v(" Accepta estils markdown "),s("a",{attrs:{href:"https://www.markdownguide.org/basic-syntax/",target:"_blank"}},[s("external-link-icon",{staticClass:"custom-class",attrs:{size:"1.2x"}})],1)])]),s("h4",{staticClass:"mt-5"},[t._v(" Previsualització "),s("eye-off-icon",{directives:[{name:"show",rawName:"v-show",value:t.mostrarParsed,expression:"mostrarParsed"}],staticClass:"float-right mr-3",attrs:{size:"1x"},on:{click:function(a){t.mostrarParsed=!1}}}),s("eye-icon",{directives:[{name:"show",rawName:"v-show",value:!t.mostrarParsed,expression:"!mostrarParsed"}],staticClass:"float-right mr-3",attrs:{size:"1x"},on:{click:function(a){t.mostrarParsed=!0}}})],1),s("vue-markdown",{directives:[{name:"show",rawName:"v-show",value:t.mostrarParsed,expression:"mostrarParsed"}],ref:"html",staticClass:"previsualitzacio",attrs:{source:t.markdown}}),s("h4",{staticClass:"mt-4"},[t._v("Adjuntar arxiu")]),s("b-form-file",{ref:"adjunts",attrs:{placeholder:"Tria un arxiu o arrastra'l aquí","drop-placeholder":"Arrastra'l aquí",multiple:""},model:{value:t.adjunts,callback:function(a){t.adjunts=a},expression:"adjunts"}}),s("div",{staticClass:"mt-2 mb-2",staticStyle:{height:"48px"}},[s("b-button",{staticClass:"float-right",attrs:{variant:"dark"},on:{click:t.clearFiles}},[t._v("Borrar arxius")])],1),s("hr"),s("h4",{staticClass:"mt-4"},[t._v("Enviar a")]),s("b-form-select",{attrs:{options:t.cordes,disabled:""},model:{value:t.filtroCorda,callback:function(a){t.filtroCorda=a},expression:"filtroCorda"}}),s("b-form-checkbox",{staticClass:"mt-3",model:{value:t.marcar,callback:function(a){t.marcar=a},expression:"marcar"}},[t._v(" Marcar-lo a la pàgina principal ")]),s("b-button",{staticClass:"float-right btn-block mt-4",attrs:{type:"submit",variant:"primary"}},[t._v("Enviar")])],1),s("div",{staticClass:"mb-4"})],1)])},ge=[],_e={name:"Newsletter",components:{VueMarkdown:ua.a,EyeOffIcon:p["f"],EyeIcon:p["e"],ExternalLinkIcon:p["d"]},data(){return{adjunts:[],assumpte:"",filtroCorda:"Tots",mostrarMarkdonw:!0,mostrarParsed:!1,markdown:"",marcar:!1,cordes:["Tots","Clarinets","Flautes","Oboes","Saxos","Tubes","Trombons","Trompetes","Percusionistes","Trompes","Fagotos","Bombardins"]}},methods:{clearFiles(){this.$refs["adjunts"].reset()},enviar(t){t.preventDefault();let a=new FormData;this.adjunts.forEach((t,s)=>{a.append("adjunt-"+s,t,t.name)}),console.log(typeof this.$refs.html.$el.innerHTML),a.append("assumpte",this.assumpte),a.append("html",this.$refs.html.$el.innerHTML),a.append("filtroCorda",this.filtroCorda),a.append("marcar",this.marcar),U.a.post("/docs/newsletter",a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log(t),this.clearFiles()}).catch(t=>{console.error(t)})}},mounted(){}},Ce=_e,xe=(s("f6cc"),Object(b["a"])(Ce,be,ge,!1,null,"727ccb9a",null)),je=xe.exports,ke=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("h3",{staticClass:"ml-3"},[t._v("Llistat complet dels músics")]),s("b-form",{staticClass:"m-4",attrs:{inline:""}},[s("b-form-group",{staticClass:"mr-3 ml-2",attrs:{label:"Data","label-for":"input-x"}},[s("b-form-input",{staticClass:"ml-2",attrs:{id:"input-x",type:"date"},model:{value:t.data,callback:function(a){t.data=a},expression:"data"}})],1),s("b-button",{staticClass:"mr-4",attrs:{variant:"info"},on:{click:t.descargarPDF}},[t._v("Baixar llista com a PDF")]),s("b-button",{attrs:{variant:"info"},on:{click:t.descargar}},[t._v("Baixar llista com a CVS")])],1),s("div",{staticStyle:{"background-color":"#fff"}},[s("b-table",{attrs:{striped:"",hover:"",borderless:"",responsive:"",items:t.llistat,fields:t.fields},scopedSlots:t._u([{key:"cell(tipo_compte)",fn:function(a){return[0===a.value?s("span",{staticClass:"badge badge-primary"},[t._v("normal")]):t._e(),1===a.value?s("span",{staticClass:"badge badge-info"},[t._v("junta")]):t._e(),2===a.value?s("span",{staticClass:"badge badge-danger"},[t._v("president")]):t._e(),3===a.value?s("span",{staticClass:"badge badge-dark"},[t._v("admin")]):t._e()]}},{key:"cell(compte_actiu)",fn:function(a){return[a.value?s("span",{staticClass:"badge badge-success"},[t._v("actiu")]):s("span",{staticClass:"badge badge-warning"},[t._v("no actiu")])]}},{key:"cell(llista_correu)",fn:function(a){return[a.value?s("span",{staticClass:"badge badge-success"},[t._v("si")]):s("span",{staticClass:"badge badge-warning"},[t._v("no")])]}},{key:"cell(accions)",fn:function(a){return[s("b-dropdown",{staticClass:"m-md-2",attrs:{text:"accions"}},[a.item.compte_verificat?t._e():s("b-dropdown-item",[t._v("Reenviar correu verificació")]),a.item.compte_actiu?s("b-dropdown-item",{on:{click:function(s){return t.desactivar(a.item._id)}}},[t._v("Desactivar compte")]):s("b-dropdown-item",{on:{click:function(s){return t.activar(a.item._id)}}},[t._v("Activar compte")]),s("b-dropdown-divider"),s("b-dropdown-group",{attrs:{header:"Canviar tipus"}},[s("b-dropdown-item",{on:{click:function(s){return t.canviTipus(a.item._id,a.item.tipo_compte,0)}}},[t._v("normal")]),s("b-dropdown-item",{on:{click:function(s){return t.canviTipus(a.item._id,a.item.tipo_compte,1)}}},[t._v("junta")]),s("b-dropdown-item",{on:{click:function(s){return t.canviTipus(a.item._id,a.item.tipo_compte,2)}}},[t._v("president")]),s("b-dropdown-item",{on:{click:function(s){return t.canviTipus(a.item._id,a.item.tipo_compte,3)}}},[t._v("admin")])],1)],1)]}}])})],1)],1)},we=[],ye=s("e511"),Ae=s.n(ye),Ie=(s("0da4"),{name:"GestioMusics",data(){return{fields:[{key:"nom",sortable:!0},{key:"cognoms",sortable:!0},{key:"instrument",sortable:!0},{label:"Tipus de compte",key:"tipo_compte",sortable:!0},{label:"Compte actiu",key:"compte_actiu",sortable:!0},{label:"Subscrit al newsletter",key:"llista_correu",sortable:!0},{label:"accions",key:"accions",sortable:!1}],llistat:[],data:""}},methods:{descargarPDF(){var t=new Ae.a("p","pt");let a=20;if(this.data.length>0){t.setFontSize(16);let e=this.data.split("-");var s=`${e[2]}/${e[1]}/${e[0]}`;t.text(`Assaig dia: ${s}`,40,40),a=60}let e=[];this.llistat.forEach(t=>{e.push([t.cognoms,t.nom,"                                                         "])}),t.autoTable({styles:{theme:"plain"},margin:{top:a},head:[["Cognoms","Nom"," ~ "]],body:e}),this.data.length>0?t.save(`Assistència assaig ${s}.pdf`):t.save("lista músics.pdf")},descargar(){let t="data:text/csv;charset=utf-8,";if(this.data.length>0){let s=this.data.split("-");var a=`${s[2]}/${s[1]}/${s[0]}`;t+=a+"\n"}t+="Cognom, Nom, \n";let s=[...this.llistat];s=s.sort((t,a)=>t.cognoms<a.cognoms?-1:t.cognoms>a.cognoms?1:0);t+=s.map(t=>`${t.cognoms}, ${t.nom}, `).join("\n");var e=encodeURI(t),i=document.createElement("a");i.setAttribute("href",e),this.data.length>0?i.setAttribute("download",`Assistència assaig ${this.data}.csv`):i.setAttribute("download","Llista músics.csv"),document.body.appendChild(i),i.click()},carregarInfo(){U.a.get("/info/musics").then(t=>{console.log(t),this.llistat=t.data.musics}).catch(console.error)},activar(t){U.a.put(`/info/music/activar/${t}`).then(t=>{this.carregarInfo()}).catch(console.error)},desactivar(t){U.a.put(`/info/music/desactivar/${t}`).then(t=>{this.carregarInfo()}).catch(console.error)},canviTipus(t,a,s){U.a.put("/info/music/tipo",{tipus:s,tipusAnterior:a,id:t}).then(t=>{this.carregarInfo()}).catch(console.error)}},mounted(){this.carregarInfo()}}),$e=Ie,Ee=Object(b["a"])($e,ke,we,!1,null,"05ee8980",null),Me=Ee.exports,Se=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",{staticClass:"text-center"},[s("h1",{staticClass:"display-2"},[t._v(";(")]),s("h1",{staticClass:"display-5 mt-5"},[t._v("Aluna cosa ha anat malament")]),s("router-link",{attrs:{to:{path:"/logout",name:"logout",params:{}}}},[s("button",{staticClass:"btn btn-dark bnt-lg w-50 mt-5"},[t._v(" INICI ")])])],1)},Pe=[],ze={},De=ze,Ne=(s("3b43"),Object(b["a"])(De,Se,Pe,!1,null,"0bea34a0",null)),Fe=Ne.exports;e["default"].use(S["a"]);const qe=[{path:"/",name:"",component:T,meta:{titol:"BANDA UJI",requiresAuth:!1}},{path:"/compte",name:"compte",component:ta,children:[{path:"principal",name:"principal",component:Et,meta:{titol:"Home",requiresAuth:!0}},{path:"assistencia",name:"assistencia",component:pa,meta:{titol:"Assistència",requiresAuth:!0}},{path:"actuacions",name:"Actuacions",component:oa,meta:{titol:"Properes actuacions",requiresAuth:!0}},{path:"preferencies",name:"Preferències",component:$a,meta:{titol:"Preferències del compte",requiresAuth:!0}}]},{path:"/gestio",name:"gestio",component:Ga,beforeEnter(t,a,s){t.meta.requiresAuth?f.state.logged&&(f.state.junta||f.state.admin)?s():s("/principal"):s()},children:[{path:"assitencia/:cursId:semestreId:assaigId",name:"control_assitència",component:is,meta:{titol:"Control de la Assistència",requiresAuth:!0}},{path:"assitencia",name:"control assitència",component:is,meta:{titol:"Control de la Assistència",requiresAuth:!0},props:{default:!0,sidebar:!1}},{path:"assajos",name:"gestió assajos",component:js,meta:{titol:"Gestió dels assajos",requiresAuth:!0}},{path:"actuacions",name:"gestió actuacions",component:Gs,meta:{titol:"Gestió dels concerts",requiresAuth:!0}},{path:"cursos",name:"gestió cursos",component:ie,meta:{titol:"Gestió dels cursos",requiresAuth:!0}},{path:"credits",name:"",component:he,meta:{titol:"Gestió dels credits",requiresAuth:!0}},{path:"newsletter",name:"Newsletter",component:je,meta:{titol:"Newsletter",requiresAuth:!0}},{path:"musics",name:"Gestió músics",component:Me,meta:{titol:"Musics",requiresAuth:!0}}]},{path:"/crear",name:"crearCompte",component:Ft,meta:{titol:"Associació Cultural Banda UJI",requiresAuth:!1}},{path:"/entrar",name:"login",component:Yt,meta:{titol:"Associació Cultural Banda UJI",requiresAuth:!1}},{path:"/recuperacio",name:"recuperacio",component:Da,meta:{titol:"Recuperació del compte",requiresAuth:!1}},{path:"/actualitzar",name:"actualitzar",component:Ra,meta:{titol:"Recuperació del compte",requiresAuth:!1}},{path:"/logout",name:"logout",component:Vt,meta:{titol:"Tancar sessió",requiresAuth:!0}},{path:"/r",name:"error",component:Fe,meta:{titol:"",requiresAuth:!1}}],Oe=new S["a"]({routes:qe,mode:"history"});Oe.beforeEach((t,a,s)=>{t.meta.requiresAuth?f.getters.isLogged?s():s("/"):s()});var Te=Oe;window.$=window.jQuery=s("1157"),e["default"].use(w["a"]),e["default"].use(i["a"]),e["default"].use(M["a"]),e["default"].use(A.a),e["default"].use($.a);const Re=s("c1df");s("d716"),e["default"].use(s("2ead"),{moment:Re}),U.a.interceptors.response.use((function(t){return t}),(function(t){return 401==t.response.status&&(console.log("sessió caducada redirigint a /"),Te.push({path:"/r",params:{msgError:"Sessió Caducada ;("}})),Promise.reject(t)})),e["default"].config.productionTip=!1,e["default"].use(E["a"],{plyr:{fullscreen:{enabled:!1}},emit:["ended"]}),new e["default"]({$:u.a,router:Te,render:t=>t(k)}).$mount("#app")},"5adf":function(t,a,s){"use strict";var e=s("a228"),i=s.n(e);i.a},"5c61":function(t,a,s){},"6dc6":function(t,a,s){"use strict";var e=s("162b"),i=s.n(e);i.a},"6f64":function(t,a,s){"use strict";var e=s("7014"),i=s.n(e);i.a},7014:function(t,a,s){},7020:function(t,a,s){t.exports=s.p+"img/nadal.3427bf7b.jpeg"},7967:function(t,a,s){},"7aa3":function(t,a,s){t.exports=s.p+"img/santa-cecilia.16f29773.jpeg"},"7aec":function(t,a,s){},"7e71":function(t,a,s){},8948:function(t,a,s){"use strict";var e=s("4ea4"),i=s.n(e);i.a},"896b":function(t,a,s){t.exports=s.p+"media/doblatge_banda_uji.4e369c41.mp4"},"8a4e":function(t,a,s){t.exports=s.p+"img/compassos.6e781b89.jpeg"},"93a1":function(t,a,s){"use strict";var e=s("3a9b"),i=s.n(e);i.a},"965a":function(t,a,s){t.exports=s.p+"img/menador.2c1ed6fb.jpg"},"982a":function(t,a,s){"use strict";var e=s("0842"),i=s.n(e);i.a},"98e2":function(t,a,s){},"9ec5":function(t,a,s){},"9f3e":function(t,a,s){"use strict";var e=s("de83"),i=s.n(e);i.a},a228:function(t,a,s){},a6c3:function(t,a,s){},c0ae:function(t,a,s){"use strict";var e=s("98e2"),i=s.n(e);i.a},ce6c:function(t,a,s){"use strict";var e=s("1390"),i=s.n(e);i.a},cf05:function(t,a,s){t.exports=s.p+"img/logo.0b9bc992.png"},cf25:function(t,a,s){"use strict";var e=s("fea6"),i=s.n(e);i.a},d12b:function(t,a,s){},d4bf:function(t,a,s){"use strict";var e=s("7aec"),i=s.n(e);i.a},d5c4:function(t,a,s){},de83:function(t,a,s){},e4a8:function(t,a,s){"use strict";var e=s("1228"),i=s.n(e);i.a},e537:function(t,a,s){},e814:function(t,a,s){"use strict";var e=s("7967"),i=s.n(e);i.a},ed72:function(t,a,s){"use strict";var e=s("53fe"),i=s.n(e);i.a},ef40:function(t,a,s){"use strict";var e=s("0630"),i=s.n(e);i.a},f6cc:function(t,a,s){"use strict";var e=s("fc92"),i=s.n(e);i.a},f874:function(t,a,s){"use strict";var e=s("d5c4"),i=s.n(e);i.a},f8b2:function(t,a,s){"use strict";var e=s("a6c3"),i=s.n(e);i.a},fc92:function(t,a,s){},fea6:function(t,a,s){},feb8:function(t,a,s){"use strict";var e=s("433e"),i=s.n(e);i.a}});
//# sourceMappingURL=app.923c7385.js.map